<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 11.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="UG_html.css" CHARSET="UTF-8" TYPE="text/css">
<table id="Topofpage" border="0" width="850" cellspacing="0" cellpadding="0"><tr><td align="left"><a href="http://www.hdfgroup.org"><img id="THG_logo" border="0" src="images/hdf_logo.jpg" width="90" height="70" alt="The HDF Group" valign="top" /></a></td><td valign="middle" align="center"><H1>HDF User’s Guide</H1><span style="font-size: 14px; font-weight: bold"><b>4.2.10</b></td><td valign="middle" align="center"><a HREF=UG_html.htm> [Top]</a> <a HREF=UG_html-5.htm> [Prev]</a><a HREF=UG_html-7.htm> [Next]</a></td></tr></table><HR></HEAD>
<BODY>
<DIV>
<span style="font-size: 14px; font-weight: bold"><a href="UG_html-17.htm">Index</a>] [<a href="UG_html-20.htm">List of Examples</a>] [<a href="UG_html-19.htm">List of Tables</a>] [<a href="UG_html-18.htm">List of Figures</a>]</DIV>
<H1 CLASS="ChapterTitle">
<A NAME="50593876_pgfId-27252"></A>Chapter 6 --	<A NAME="50593876_marker-8314"></A><A NAME="50593876_20224"></A>8-Bit Raster Images (DFR8 API)</H1>
<DIV>
<H4 CLASS="Heading1">
<A NAME="50593876_pgfId-5969"></A>	6.1	Chapter Overview<DIV>
<IMG SRC="UG_html-39.gif" ALT="">
</DIV>
</H4>
<P CLASS="Body">
<A NAME="50593876_pgfId-26923"></A>This chapter describes the 8-bit raster image data model and the single-file DFR8 interface routines. The DFR8 interface is a single-file interface that consists of routines for reading and writing raster image sets.</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-26951"></A><EM CLASS="Definition">
Note</EM>
: This interface is now deprecated and superseded by the <A HREF="UG_html-8.htm#50593878_29022" CLASS="XRef">General Raster Images (GR API)</A> interface (Chapter 8.)</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-2870"></A>Th<A NAME="50593876_marker-8318"></A>e 8-Bit Raster Data Model</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-5987"></A>The data model <A NAME="50593876_marker-8317"></A>for <A NAME="50593876_marker-8316"></A>the <A NAME="50593876_marker-5986"></A><EM CLASS="Definition">
8-bit raster image</EM>
 set, or <EM CLASS="Definition">
RIS8</EM>
, an acronym for &quot;Raster Image Set, 8-bit&quot;, supports three types of objects; two-dimensional 8-bit raster images, dimensions and palettes. The latter two items occur once per RIS8. The following figure shows the contents of an 8-bit raster image set.</P>
<DIV>
<H6 CLASS="Figure">
<A NAME="50593876_pgfId-6032"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
FIGURE 6a	<A NAME="50593876_89021"></A>8-Bit Raster Image Set Contents</H6>
<DIV>
<IMG SRC="UG_html-41.gif" ALT="">
</DIV>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-2926"></A>	6.1.1	<A NAME="50593876_96171"></A>Re<A NAME="50593876_marker-8325"></A>quired 8-Bit Raster Image Data Set Objects</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-2928"></A>Every RIS8 object requires an image and dimension object. Required objects are created by the HDF library using information provided at the time the image is written. </P>
<DIV>
<H6 CLASS="Heading4">
<A NAME="50593876_pgfId-2945"></A>	6.1.1.1	8-B<A NAME="50593876_marker-8391"></A>it Raster Image Data Representation</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-2947"></A>A<A NAME="50593876_marker-8327"></A>n<EM CLASS="Definition">
 8-bit raster image </EM>
is a two-dimensional array of 8-bit numbers which<A NAME="50593876_marker-8328"></A> represent <EM CLASS="Definition">
pixels</EM>
 or &quot;picture elements&quot;.The first row of pixels corresponds to the top row of the image, the second row of pixels to the second row of the image and so forth. Pixel values range from 0 to 255, and indicate to the hardware which colors to use when mapping the corresponding pixels to the screen display. A <EM CLASS="Definition">
color lookup table, </EM>
or <EM CLASS="Definition">
palette</EM>
, provides the means of correlating pixel values to colors.</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-26752"></A>A<A NAME="50593876_marker-26748"></A>s an example, consider a stream of 8-bit numbers representing a raster image. <A HREF="UG_html-6.htm#50593876_15404" CLASS="XRef">(See Figure 6b)</A> When the image is displayed, the color associated with the first number in the data stream is placed in the upper left corner of the image. The remainder of the first line is then painted from left-to-right using as many values from the data stream as is necessary to complete the line. The remainder of the rows are similarly painted from left-to-right and top-to-bottom until every value in the data stream appears is represented by one pixel in the image. </P>
</DIV>
<DIV>
<H6 CLASS="Figure">
<A NAME="50593876_pgfId-26757"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
FIGURE 6b	<A NAME="50593876_15404"></A>The Data Representation of an 8-Bit Raster Image</H6>
<DIV>
<IMG SRC="UG_html-42.gif" ALT="">
</DIV>
<DIV>
<H6 CLASS="Heading4">
<A NAME="50593876_pgfId-26758"></A>	6.1.1.2	8-Bit Raster Image Dimension</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-2951"></A>Th<A NAME="50593876_marker-8330"></A>e dimensions of an image are its height and width in pixels.<A NAME="50593876_marker-8326"></A></P>
</DIV>
</DIV>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-4389"></A>	6.1.2	Op<A NAME="50593876_marker-8331"></A>tional 8-Bit Raster Image Data Set Objects</H6>
<DIV>
<H6 CLASS="Heading4">
<A NAME="50593876_pgfId-7382"></A>	6.1.2.1	Palettes</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-7383"></A>A<A NAME="50593876_marker-8333"></A> <EM CLASS="Definition">
palette</EM>
 is a lookup table consisting of 256 unique numerical values, each of which map to the 256 possible pixel color values and is stored in a RIS8 object. For more details on HDF palettes refer to Chapter 9, titled Palettes (DFP API). </P>
</DIV>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-4387"></A>	6.1.3	C<A NAME="50593876_marker-8334"></A>ompression Method</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-4394"></A>The compression method indicates if and how the image is compressed. It can be, at the programmer’s option, explicitly set or left as its default setting of no compression. Compression schemes supported by HDF version 4.0 are run-length encoding or RLE, joint photographic expert group compression, or JPEG, and image compression, or IMCOMP . The list of compression methods is presented below. <A HREF="UG_html-6.htm#50593876_86571" CLASS="XRef">8-Bit Raster Image Compression Method List</A> The HDF tags <EM CLASS="DefName">
COMP_RLE</EM>
, <EM CLASS="DefName">
COMP_IMCOMP</EM>
 and <EM CLASS="DefName">
COMP_JPEG</EM>
 are respectively defined as the values 11, 12 and 2 in the &quot;hcomp.h&quot; header file. </P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593876_pgfId-2968"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
8-Bit Raster Image Compression Method List<A NAME="50593876_86571"></A></H6>
<TABLE>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-9550"></A>Compression Method</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-9552"></A>Type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-9554"></A>Compression Code</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-9556"></A>Requirements</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9558"></A>None</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9560"></A>N/A</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593876_pgfId-9562"></A><EM CLASS="DefName">
COMP_NONE</EM>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9564"></A>Image data only (default setting).</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9566"></A>RLE</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9568"></A>Lossless </P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593876_pgfId-9570"></A><EM CLASS="DefName">
COMP_RLE</EM>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9572"></A>Image data only.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9574"></A>JPEG</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9576"></A>Lossy </P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593876_pgfId-9578"></A><EM CLASS="DefName">
COMP_JPEG</EM>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9580"></A>Image data, quality factor and compatibility factor.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9582"></A>IMCOMP</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9584"></A>Lossy </P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593876_pgfId-9586"></A><EM CLASS="DefName">
COMP_IMCOMP</EM>
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9588"></A>Image data and palette.</P>
</TD>
</TR>
</TABLE>
</DIV>
<DIV>
<H6 CLASS="BodyBold">
<A NAME="50593876_pgfId-2970"></A>R<A NAME="50593876_marker-8335"></A>LE Co<A NAME="50593876_marker-8336"></A>mpression </H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-2972"></A>The <EM CLASS="Definition">
RLE</EM>
 method is a lossless compression method recommended for images where data retention is critical. The RLE algorithm compresses images by condensing strings of identical pixel values into two bytes. The first byte identifies the number of pixels in the string and the second byte records the pixel value for the string.</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-2974"></A>The amount of space saved by RLE depends upon how much repetition there is among adjacent pixels. If there is a great deal of repetition, more space is saved and if there is little repetition, the savings can be very small. In the worst case when every pixel is different from the one that precedes it an extra byte is added for every 127 bytes in the image.</P>
</DIV>
<DIV>
<H6 CLASS="BodyBold">
<A NAME="50593876_pgfId-2976"></A>JP<A NAME="50593876_marker-8337"></A>EG Co<A NAME="50593876_marker-8338"></A>mpression </H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-2978"></A>The <EM CLASS="Definition">
JPEG</EM>
, or Joint Photographic Expert Group, compression method is a lossy compression algorithm whose use is recommended for photographic or scanned images. Using JPEG compression to reduce the size of an image changes the values of the pixels and hence may alter the meaning of the corresponding data. Version 5.0 of the JPEG library is available in HDF version 4.0.</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-4426"></A>JPEG compression requires two parameters, the first the level of image quality and the second, compatibility. T<A NAME="50593876_marker-8340"></A>he <EM CLASS="Definition">
quality factor</EM>
 determines how much of the data will be lost and thus directly impacts the size of the compressed image. A quality factor of 1 specifies the lowest quality or maximum image compression. A quality factor of 100 specifies the highest quality or minimum image compression. Note that all images compressed using the JPEG algorithm are stored in a lossy manner, even those stored with a quality factor of 100. Usually, it is best to experiment with the quality factor to find the most acceptable one. </P>
<P CLASS="Body">
<A NAME="50593876_pgfId-5036"></A>The <EM CLASS="VarName">
baseline</EM>
 parameter determines whether the contents of the quantization tables used during compression are forced into the range of 0 to 255. The <EM CLASS="VarName">
baseline</EM>
 parameter is normally set to the value 1 which forces baseline results. You should set the value of the <EM CLASS="VarName">
baseline</EM>
 parameter to values other than 1 <EM CLASS="TextItalic">
only</EM>
 if you are familiar with the JPEG algorithm. </P>
</DIV>
<DIV>
<H6 CLASS="BodyBold">
<A NAME="50593876_pgfId-4448"></A>IMCO<A NAME="50593876_marker-8339"></A>MP C<A NAME="50593876_marker-8387"></A>ompression </H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-8322"></A><EM CLASS="Definition">
IMCOMP</EM>
 is a lossy compression method available in earlier versions of HDF. IMCOMP compression is generally of inferior quality to JPEG compression and is not recommended unless your images will be viewed on a 16-color monitor. For backward compatibility, IMCOMP compression is supported in the HDF library. For details on IMCOMP refer to Appendix F, titled <EM CLASS="TextItalic">
Backward Compatibility Issues</EM>
<A NAME="50593876_marker-8332"></A>.<A NAME="50593876_marker-8323"></A></P>
</DIV>
</DIV>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593876_pgfId-8324"></A>	6.2	The 8<A NAME="50593876_marker-8341"></A>-Bit Raster Image Interface<DIV>
<IMG SRC="UG_html-39.gif" ALT="">
</DIV>
</H5>
<P CLASS="Body">
<A NAME="50593876_pgfId-3024"></A>The HDF library contains routines for reading and writing 8-bit raster image sets. The functions <EM CLASS="FunctionName">
DFR8addimage</EM>
, <EM CLASS="FunctionName">
DFR8putimage</EM>
 and <EM CLASS="FunctionName">
DFR8getimage</EM>
 are sufficient for most reading and writing operations.</P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-3026"></A>	6.2.1	8-B<A NAME="50593876_marker-8342"></A>it Raster Image Library Routines</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-3028"></A>The names of all C functions in the 8-bit raster image interface are prefaced by &quot;DFR8&quot; and the names of the equivalent FORTRAN-77 functions are prefaced by &quot;d8&quot;. These routines are divided into the following categories:</P>
<UL>
<LI CLASS="Bullet">
<A NAME="50593876_pgfId-3030"></A><EM CLASS="Definition">
Write routines</EM>
 create raster image sets and store them in new files or append them to existing files. </LI>
<LI CLASS="Bullet">
<A NAME="50593876_pgfId-11084"></A><EM CLASS="Definition">
Read routines</EM>
 determine the dimensions and palette assignment for an image set, read the actual image data and provide sequential or random read access to any raster image set.</LI>
</UL>
<P CLASS="Body">
<A NAME="50593876_pgfId-11088"></A>The DFR8 function calls are further defined in <A HREF="UG_html-6.htm#50593876_73294" CLASS="XRef">Table 6B</A> and in the <EM CLASS="TextItalic">
HDF Reference Guide</EM>
.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593876_pgfId-11212"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
DFR<A NAME="50593876_marker-11089"></A>8 Library Routines<A NAME="50593876_73294"></A></H6>
<TABLE>
<TR>
<TH ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11093"></A>Category</P>
</TH>
<TH ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11095"></A>Routine Name</P>
</TH>
<TH ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11099"></A>Description</P>
</TH>
</TR>
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11103"></A>C </P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11105"></A>FORTRAN-77</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="6" COLSPAN="1">
<P CLASS="TableCategory">
<A NAME="50593876_pgfId-11109"></A>Write</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11111"></A>DFR8addimage</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11113"></A>d8aimg</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11115"></A>Appends an 8-bit raster image to a file.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11119"></A>DFR8putimage</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11121"></A>d8pimg</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11123"></A>Writes an 8-bit raster image to an existing file or creates the file.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11127"></A>DFR8setcompress</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11129"></A>d8setcomp</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11131"></A>Sets the compression type.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11135"></A>DFR8setpalette</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11137"></A>d8spal</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11139"></A>Sets palette for multiple 8-bit raster images.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11143"></A>DFR8writeref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11145"></A>d8wref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11147"></A>Stores the raster image using the specified reference number.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellBody">
<A NAME="50593876_pgfId-11151"></A>None</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11153"></A>d8sjpeg</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11155"></A>Passes the quality and compatibility factors needed for the JPEG compression algorithm.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="7" COLSPAN="1">
<P CLASS="TableCategory">
<A NAME="50593876_pgfId-11157"></A>Read</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11159"></A>DFR8getdims</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11161"></A>d8gdims</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11163"></A>Retrieves dimensions for an 8-bit raster image.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11167"></A>DFR8getimage</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11169"></A>d8gimg</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11171"></A>Retrieves an 8-bit raster image and its palette.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11175"></A>DFR8getpalref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellBody">
<A NAME="50593876_pgfId-11177"></A>None</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11179"></A>Returns the reference number of the palette associated with the last image accessed.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11183"></A>DFR8lastref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11185"></A>d8lref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11187"></A>Returns reference number of the last element accessed.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11191"></A>DFR8nimages</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11193"></A>d8nims</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11195"></A>Returns number of raster images in a file.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11199"></A>DFR8readref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11201"></A>d8rref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11203"></A>Gets the next raster image with the specified reference number.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11207"></A>DFR8restart</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593876_pgfId-11209"></A>d8first</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11211"></A>Ignores information about last file accessed and restarts from beginning.</P>
</TD>
</TR>
</TABLE>
</DIV>
</DIV>
</DIV>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593876_pgfId-3049"></A>	6.3	Wr<A NAME="50593876_marker-8344"></A>iting 8-Bit Raster Images<DIV>
<IMG SRC="UG_html-39.gif" ALT="">
</DIV>
</H5>
<P CLASS="Body">
<A NAME="50593876_pgfId-3051"></A>The DFR8 programming model for writing an 8-bit raster image sets is as follows:</P>
<DIV>
<H6 CLASS="FM1Step">
<A NAME="50593876_pgfId-3053"></A>Set the compression type if the image is to be compressed. (optional)</H6>
<OL>
<LI CLASS="Step">
<A NAME="50593876_pgfId-3055"></A>2.	Identify the palette if one is to be stored with the image. (optional)</LI>
<LI CLASS="Step">
<A NAME="50593876_pgfId-3057"></A>3.	Write the raster data to the file. </LI>
</OL>
<P CLASS="Body">
<A NAME="50593876_pgfId-3063"></A>The two optional steps can be invoked in any order, as long as they are executed before Step 3. By default, images are stored uncompressed with no associated palette.</P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-3072"></A>	6.3.1	Storing a Raster Image: DFR8putimage and DFR8addimage</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-3074"></A>To write a raster image to an HDF file, the calling program must contain the following:</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-3076"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFR8putimage(filename, image, width, height, compress);</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-3078"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = d8pimg(filename, image, width, height, compress)</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-18278"></A>		<EM CLASS="syntaxLang">
OR</EM>
</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-18279"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFR8addimage(filename, image, width, height, compress);</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-18280"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = d8aimg(filename, image, width, height, compress)</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-3086"></A><EM CLASS="FunctionName">
DFR8putimage</EM>
<A NAME="50593876_marker-8346"></A> and <EM CLASS="FunctionName">
DFR8addimage</EM>
<A NAME="50593876_marker-8347"></A> write an 8-bit raster image to an HDF file named by the <EM CLASS="VarName">
filename</EM>
 parameter. When given a new filename, <EM CLASS="FunctionName">
DFR8putimage</EM>
 and <EM CLASS="FunctionName">
DFR8addimage</EM>
 create a new file and write the raster image as the first raster image in the file. When given an existing filename, <EM CLASS="FunctionName">
DFR8putimage</EM>
 overwrites the file whereas <EM CLASS="FunctionName">
DFR8addimage</EM>
 appends data to the end of the file.</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-3092"></A>In the <EM CLASS="FunctionName">
DFR8putimage</EM>
 and <EM CLASS="FunctionName">
DFR8addimage</EM>
 functions, the raster data is passed in the image parameter and the width and height of the image are passed in the width and height parameters. The compression algorithm used to store the image is passed in the compress parameter. Valid compress values include <EM CLASS="DefName">
COMP_NONE</EM>
, <EM CLASS="DefName">
COMP_RLE</EM>
, <EM CLASS="DefName">
COMP_JPEG</EM>
 and <EM CLASS="DefName">
COMP_IMCOMP</EM>
. <EM CLASS="DefName">
COMP_NONE</EM>
 represents no compression (storage only), <EM CLASS="DefName">
COMP_RLE</EM>
 represents run-length encoding, <EM CLASS="DefName">
COMP_JPEG</EM>
 represents JPEG compression and <EM CLASS="DefName">
COMP_IMCOMP</EM>
 represents IMCOMP encoding.</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-8148"></A>Parameters for <EM CLASS="FunctionName">
DFR8putimage</EM>
 and <EM CLASS="FunctionName">
DFR8addimage</EM>
 are further described below. <A HREF="UG_html-6.htm#50593876_24691" CLASS="XRef">DFR8putimage and DFR8addimage Parameter List</A></P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593876_pgfId-13125"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
<A NAME="50593876_24691"></A>DFR8<A NAME="50593876_marker-13043"></A>putimage and DFR8ad<A NAME="50593876_marker-13044"></A>dimage Parameter List</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-13047"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-13048"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593876_pgfId-13049"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-13051"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-13053"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-13057"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-13063"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-13065"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="5" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-13069"></A>DFR8putimage</H6>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-13070"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-13071"></A>(d8pimg)</H6>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-13072"></A>and</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-13073"></A>DFR8addimage</H6>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-13074"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-13075"></A>(d8aimg)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13078"></A>filename</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13080"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13082"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-13084"></A>Name of file the raster image will be stored in.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13088"></A>image</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13090"></A>VOIDP</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13092"></A>&lt;valid numeric data type&gt;</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-13094"></A>Image data array.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13098"></A>width</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13100"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13102"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-13104"></A>Number of columns in the raster image.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13108"></A>height</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13110"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13112"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-13114"></A>Number of rows in the raster image.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13118"></A>compress</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13120"></A>int16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-13122"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-13124"></A>Compression type.</P>
</TD>
</TR>
</TABLE>
</DIV>
<DIV>
<H6 CLASS="Example">
<A NAME="50593876_pgfId-13127"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
<A NAME="50593876_24421"></A>Writing an 8-Bit Raster Image to an HDF File</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-13128"></A>In the following code examples, <EM CLASS="FunctionName">
DFR8addimage</EM>
 and <EM CLASS="FunctionName">
d8aimg</EM>
 are used to write an 8-bit image to a file named &quot;Example1.hdf&quot;. Note that the order in which the dimensions for the image array are declared differs between C and FORTRAN-77. </P>
</DIV>
</DIV>
</DIV>
</DIV>
<DIV>
<H4 CLASS="Code-C-Title">
<A NAME="50593876_pgfId-27469"></A><DIV>
<IMG SRC="UG_html-43.gif" ALT="">
</DIV>
C:	</H4>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27472"></A>#include &quot;hdf.h&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27473"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27474"></A>#define WIDTH 5</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27475"></A>#define HEIGHT 6</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27476"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27477"></A>main( )</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27478"></A>{</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27479"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27480"></A>	/* Initialize the image array */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27481"></A>	static uint8 raster_data[HEIGHT][WIDTH] = </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27482"></A>		{ 1, 2, 3, 4, 5,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27483"></A>		6, 7,	8, 9, 10,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27484"></A>		11, 12, 13,	14, 15,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27485"></A>		16, 17, 18, 19, 20,	</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27486"></A>		21, 22, 23,	24, 25,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27487"></A>		26, 27, 28,	29, 30 };</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27488"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27489"></A>	intn status;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27490"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27491"></A> &nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27492"></A>	/* Write the 8-bit raster image to file */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27493"></A>	status = DFR8addimage(&quot;Example1.hdf&quot;, raster_data, </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27494"></A>					WIDTH, HEIGHT, 0);</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27495"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27496"></A>}</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-27498"></A>&nbsp;</P>
</DIV>
<DIV>
<H4 CLASS="Code-F-Title">
<A NAME="50593876_pgfId-27500"></A><DIV>
<IMG SRC="UG_html-43.gif" ALT="">
</DIV>
FORTRAN:	</H4>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-3147"></A>	 PROGRAM RASTER8      </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10147"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10148"></A>      character*1 raster_data(5,6)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10149"></A>      integer retn, d8aimg</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10150"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10151"></A>      integer*4 WIDTH, HEIGHT</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10152"></A>      parameter(WIDTH = 5, HEIGHT = 6)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10153"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10154"></A>C     Initialize the image array</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10155"></A>      data raster_data /  1,  2,  3,  4,  5,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10156"></A>     $                    6,  7,  8,  9, 10,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10157"></A>     $                   11, 12, 13, 14, 15,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10158"></A>     $                   16, 17, 18, 19, 20,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10159"></A>     $                   21, 22, 23, 24, 25,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10160"></A>     $                   26, 27, 28, 29, 30 /</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10161"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10162"></A>C     Write the 8-bit raster image to the file</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10163"></A>      retn = d8aimg(’Example1.hdf’, raster_data, WIDTH, HEIGHT, 0)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10164"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10165"></A>      end</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10166"></A>&nbsp;</P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-5044"></A>	6.3.2	Add<A NAME="50593876_marker-8350"></A>ing a Palette to an RIS8 Object: DFR8setpalette</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-5045"></A><EM CLASS="FunctionName">
DFR8setpalette</EM>
<A NAME="50593876_marker-8351"></A> identifies the palette to be used for the subsequent write operations. It may be used to assign a palette to a single image or several images. After a palette has been set, it acts as the current palette until it is replaced by another call to <EM CLASS="FunctionName">
DFR8setpalette</EM>
. To create a raster image set containing a palette, the calling program must contain the following:</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-5046"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFR8setpalette(palette);</P>
<P CLASS="syntax">
<A NAME="50593876_pgfId-5047"></A>		status = DFR8addimage(filename, image, width, height, compress);</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-5048"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = d8spal(palette)</P>
<P CLASS="syntax">
<A NAME="50593876_pgfId-5049"></A>		status = d8aimg(filename, image, width, height, compress)</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-5050"></A><EM CLASS="FunctionName">
DFR8setpalette</EM>
 takes <EM CLASS="VarName">
palette</EM>
 as its only parameter. To set the default palette to “no palette”, pass <EM CLASS="DefName">
NULL</EM>
 as the <EM CLASS="VarName">
palette</EM>
 parameter. <EM CLASS="FunctionName">
DFR8setpalette</EM>
 is further defined in the following table.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593876_pgfId-5087"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
DFR<A NAME="50593876_marker-8352"></A>8setpalette Parameter List</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11422"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-11423"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6436"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6438"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6442"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6444"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6450"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6452"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-6456"></A>DFR8setpalette</H6>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-10610"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-6457"></A>(d8spal)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6459"></A>palette</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6461"></A>uint8 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6463"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-6465"></A>Palette to be assigned.</P>
</TD>
</TR>
</TABLE>
</DIV>
<DIV>
<H6 CLASS="Example">
<A NAME="50593876_pgfId-5088"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
Writing a Palette and an Image in RIS8 Format </H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-5089"></A>These examples demonstrate how a palette stored in the array colors and the raw image stored in the 20 x 20 array picture is written to a RIS8 object. The image is not compressed and, in these examples, uninitialized. The raster image set is stored as the first image in &quot;Example2.hdf&quot;. Note that because <EM CLASS="FunctionName">
DFR8putimage</EM>
 recreates the file, anything previously contained in this file will be erased. </P>
</DIV>
</DIV>
</DIV>
<DIV>
<H4 CLASS="Code-C-Title">
<A NAME="50593876_pgfId-5090"></A><DIV>
<IMG SRC="UG_html-43.gif" ALT="">
</DIV>
C:		</H4>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-9853"></A>#include &quot;hdf.h&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10173"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10174"></A>#define WIDTH 20</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10175"></A>#define HEIGHT 20</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10176"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10177"></A>main( )</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10178"></A>{</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10179"></A>	uint8 colors[256*3], picture[HEIGHT][WIDTH];</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10180"></A>	uint8 i, j;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10181"></A>	int16 status;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10182"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10183"></A>	/* Initialize image arrays. */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10184"></A>	for (j = 0; j &lt; WIDTH; j++) {</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10185"></A>		for (i = 0; i &lt; HEIGHT; i++) </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10186"></A>			picture[j][i] = 1;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10187"></A>      }</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10188"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10189"></A>	/* Set the current palette. */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10190"></A>	status = DFR8setpalette(colors);</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10191"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10192"></A>	/* Write the image data to the file. */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10193"></A>	status = DFR8putimage(&quot;Example2.hdf&quot;, picture, WIDTH,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10194"></A>					HEIGHT, COMP_NONE);</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10195"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10196"></A>}</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10197"></A>&nbsp;</P>
</DIV>
<DIV>
<H4 CLASS="Code-F-Title">
<A NAME="50593876_pgfId-11848"></A><DIV>
<IMG SRC="UG_html-43.gif" ALT="">
</DIV>
FORTRAN:	</H4>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-11850"></A>	 PROGRAM WRITE UNCOMPRESSED RIS8</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-11851"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10200"></A>      integer   d8spal, d8pimg, status, i, j</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10201"></A>      integer   colors(768)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10202"></A>      integer*4   WIDTH, HEIGHT, COMP_NONE</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10203"></A>      parameter (COMP_NONE = 0,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10204"></A>     +           WIDTH = 20,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10205"></A>     +           HEIGHT = 20)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10206"></A>      integer   picture(WIDTH, HEIGHT)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10207"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10208"></A>C     Initialize the image data.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10209"></A>      do 20 j = 1, WIDTH</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10210"></A>       do 10 i = 1, HEIGHT</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10211"></A>          picture(j, i) = 1</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10212"></A>10     continue</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10213"></A>20    continue</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10214"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10215"></A>C     Set the current palette.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10216"></A>      status = d8spal(colors)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10217"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10218"></A>C     Write the image data to the file.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10219"></A>      status = d8pimg(’Example2.hdf’, picture, WIDTH, HEIGHT,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10220"></A>     +                COMP_NONE)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10221"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10222"></A>      end</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10223"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10224"></A>&nbsp;</P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-3181"></A>	6.3.3	Co<A NAME="50593876_marker-8353"></A>mpressing 8-Bit Raster Image Data: DFR8setcompress</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-4985"></A>The compression type is determined by the tag passed as the fifth argument in calls to the <EM CLASS="FunctionName">
DFR8putimage</EM>
 and <EM CLASS="FunctionName">
DFR8addimage</EM>
 routines. <EM CLASS="FunctionName">
DFR8setcompress</EM>
<A NAME="50593876_marker-8354"></A> is currently required only to reset the default JPEG compression options. However, future versions of this routine will support additional compression schemes. </P>
<P CLASS="Body">
<A NAME="50593876_pgfId-4998"></A>To set non-default compression parameters, the calling program should contain the following sequence of routines:</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-3185"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFR8setcompress(type, c_info);</P>
<P CLASS="syntax">
<A NAME="50593876_pgfId-3187"></A>		status = DFR8addimage(filename, image, width, height, compress);</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-3189"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = d8scomp(type)</P>
<P CLASS="syntax">
<A NAME="50593876_pgfId-3191"></A>		&lt;compression-specific code&gt;</P>
<P CLASS="syntax">
<A NAME="50593876_pgfId-4892"></A>		status = d8aimg(filename, image, width, height, compress)</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-4921"></A>Notice that the calling sequence for C differs from the calling sequence for FORTRAN-77. Once the compression is set, the parameter <EM CLASS="VarName">
type</EM>
 in the <EM CLASS="FunctionName">
DFR8setcompress</EM>
 routine, or <EM CLASS="FunctionName">
d8scomp</EM>
 in FORTRAN-77, specifies the compression method that will be used when storing the raster images. However, the <EM CLASS="VarName">
c_info</EM>
 parameter, which is a pointer to a structure that contains information specific to the compression scheme indicated by the <EM CLASS="VarName">
type</EM>
 parameter in <EM CLASS="FunctionName">
DFR8setcompress</EM>
, is missing from <EM CLASS="FunctionName">
d8scomp</EM>
. Because data structures of variable size are not supported in FORTRAN-77, another routine specific to the compression library is required in the FORTRAN-77 calling sequence.</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-6121"></A>The <EM CLASS="VarName">
c_info</EM>
 union is described in Chapter 3, titled Scientific Data Sets (SD API). The values contained in this union are passed into the <EM CLASS="FunctionName">
d8sjpeg</EM>
 FORTRAN-77-specific routine. </P>
<P CLASS="Body">
<A NAME="50593876_pgfId-7459"></A>Parameters for <EM CLASS="FunctionName">
DFR8setcompress</EM>
 and <EM CLASS="FunctionName">
d8sjpeg</EM>
 are further described in <EM CLASS="Body">
<A HREF="UG_html-6.htm#50593876_11536" CLASS="XRef">Table 6E</A></EM>
 below.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593876_pgfId-2424"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
<A NAME="50593876_11536"></A>DFR<A NAME="50593876_marker-8355"></A>8setcompress Parameter List</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6603"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-10615"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6604"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6606"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6610"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6612"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6618"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6620"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-6624"></A>DFR8setcompress</H6>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-10616"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-6625"></A>(d8scomp)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6627"></A>type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6629"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6631"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-6633"></A>Compression method.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6637"></A>c_info</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6639"></A>comp_info *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6641"></A>None</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-6643"></A>Pointer to JPEG information structure.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-6645"></A>(d8sjpeg)</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-10621"></A>[integer]</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6647"></A>quality</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6649"></A>none</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6651"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-6653"></A>JPEG quality factor.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6657"></A>baseline</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6659"></A>none</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-6661"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-6663"></A>JPEG baseline.</P>
</TD>
</TR>
</TABLE>
</DIV>
<DIV>
<H6 CLASS="Example">
<A NAME="50593876_pgfId-3224"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
Writing a Set of Compressed 8-Bit Raster Images</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-3226"></A>These examples contain a series of calls in which four 20 x 20 images are written to the same file. The first two use palette <EM CLASS="VarName">
paletteA</EM>
 and are compressed using the RLE method; the third and fourth use palette <EM CLASS="VarName">
paletteB</EM>
 and are not compressed. </P>
</DIV>
</DIV>
</DIV>
<DIV>
<H4 CLASS="Code-C-Title">
<A NAME="50593876_pgfId-3228"></A><DIV>
<IMG SRC="UG_html-43.gif" ALT="">
</DIV>
C:		</H4>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-9928"></A> #include &quot;hdf.h&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10231"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10232"></A>#define WIDTH 20</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10233"></A>#define HEIGHT 20</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10234"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10235"></A>main ( )</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10236"></A>{</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10237"></A>	uint8 paletteA[256*3], paletteB[256*3];</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10238"></A>	uint8 picture1[HEIGHT][WIDTH], picture2[HEIGHT][WIDTH];</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10239"></A>	uint8 picture3[HEIGHT][WIDTH], picture4[HEIGHT][WIDTH];</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10240"></A>	uint8 i, j;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10241"></A>	int16 status;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10242"></A>    </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10243"></A>	/* Initialize image arrays. */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10244"></A>	for (j = 0; j &lt; WIDTH; j++) {</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10245"></A>		for (i = 0; i &lt; HEIGHT; i++) {</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10246"></A>			picture1[j][i] = 1;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10247"></A>			picture2[j][i] = 1;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10248"></A>			picture3[j][i] = 1;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10249"></A>			picture4[j][i] = 1;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10250"></A>		}</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10251"></A>	}</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10252"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10253"></A>	/* Set the first palette. */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10254"></A>	status = DFR8setpalette(paletteA);</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10255"></A>    </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10256"></A>	/* Write the compressed image data to the HDF file. */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10257"></A>	status = DFR8putimage(&quot;Example3.hdf&quot;, (VOIDP)picture1, WIDTH, HEIGHT, \</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10258"></A>					COMP_RLE);</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10259"></A>	status = DFR8addimage(&quot;Example3.hdf&quot;, (VOIDP)picture2, WIDTH, HEIGHT, \</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10260"></A>					COMP_RLE);</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10261"></A>    </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10262"></A>	/* Set the second palette. */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10263"></A>	status = DFR8setpalette(paletteB);</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10264"></A>    </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10265"></A>	/* Write the uncompressed image data to the HDF file. */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10266"></A>	status = DFR8addimage(&quot;Example3.hdf&quot;, (VOIDP)picture3, WIDTH, HEIGHT, \</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10267"></A>					COMP_NONE);</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10268"></A>	status = DFR8addimage(&quot;Example3.hdf&quot;, (VOIDP)picture4, WIDTH, HEIGHT, \</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10269"></A>					COMP_NONE);</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10270"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-18420"></A>}</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-18422"></A>&nbsp;</P>
</DIV>
<DIV>
<H4 CLASS="Code-F-Title">
<A NAME="50593876_pgfId-3256"></A><DIV>
<IMG SRC="UG_html-43.gif" ALT="">
</DIV>
FORTRAN: </H4>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-2570"></A>	 PROGRAM WRITE IMAGE SETS</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10274"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10275"></A>      integer d8spal, d8pimg, d8aimg, status</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10276"></A>      integer*4 COMP_RLE, COMP_NONE, WIDTH, HEIGHT</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10277"></A>      parameter (COMP_RLE = 11,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10278"></A>     +           COMP_NONE = 0,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10279"></A>     +           WIDTH = 20,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10280"></A>     +           HEIGHT = 20)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10281"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10282"></A>      integer paletteA(768), paletteB(768)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10283"></A>      integer picture1(WIDTH, HEIGHT), picture2(WIDTH, HEIGHT)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10284"></A>      integer picture3(WIDTH, HEIGHT), picture4(WIDTH, HEIGHT)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10285"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10286"></A>C     Initialize the image data.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10287"></A>      do 20 j = 1, WIDTH</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10288"></A>       do 10 i = 1, HEIGHT</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10289"></A>        picture1(j, i) = 1</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10290"></A>        picture2(j, i) = 1</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10291"></A>        picture3(j, i) = 1</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10292"></A>        picture4(j, i) = 1</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10293"></A>10     continue</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10294"></A>20    continue</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10295"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10296"></A>C     Set the first palette.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10297"></A>      status = d8spal(paletteA)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10298"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10299"></A>C     Write the compressed image data to the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10300"></A>      status = d8pimg(’Example3.hdf’, picture1, WIDTH, HEIGHT, </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10301"></A>     +               COMP_RLE)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10302"></A>      status = d8aimg(’Example3.hdf’, picture2, WIDTH, HEIGHT, </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10303"></A>     +               COMP_RLE)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10304"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10305"></A>C     Set the second palette.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10306"></A>      status = d8spal(paletteB)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10307"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10308"></A>C     Write the uncompressed image data to the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10309"></A>      status = d8aimg(’Example3.hdf’, picture3, WIDTH, HEIGHT, </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10310"></A>     +               COMP_NONE)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10311"></A>      status = d8aimg(’Example3.hdf’, picture4, WIDTH, HEIGHT, </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10312"></A>     +               COMP_NONE)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10313"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10314"></A>      end</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10315"></A>&nbsp;</P>
<DIV>
<H6 CLASS="Example">
<A NAME="50593876_pgfId-8201"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
<A NAME="50593876_27453"></A>Compressing and Writing a 8-Bit Raster Image</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-8202"></A>In the following examples, <EM CLASS="FunctionName">
DFR8addimage</EM>
 and <EM CLASS="FunctionName">
DFR8compress</EM>
 are used to compress an 8-bit image and write it to an HDF file named &quot;Example2.hdf&quot;. Notice that compressing an image in C requires only one function call, whereas compressing an image using FORTRAN-77 requires two. The second FORTRAN-77 call is required because it is not valid to pass a structure as a parameter in FORTRAN-77.</P>
</DIV>
</DIV>
<DIV>
<H4 CLASS="Code-C-Title">
<A NAME="50593876_pgfId-8203"></A><DIV>
<IMG SRC="UG_html-43.gif" ALT="">
</DIV>
C:		</H4>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10009"></A>#include &quot;hdf.h&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10322"></A>#include &quot;hcomp.h&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10323"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10324"></A>#define WIDTH 3</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10325"></A>#define HEIGHT 5</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10326"></A>#define PIXEL_DEPTH 3</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10327"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10328"></A>main( )</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10329"></A>{</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10330"></A>	/* Initialize the image array. */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10331"></A>	static uint8 raster_data[HEIGHT][WIDTH][PIXEL_DEPTH] = </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10332"></A>		{  1, 2, 3,  4, 5, 6,  7, 8, 9,  </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10333"></A>		  10,11,12, 13,14,15, 16,17,18, </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10334"></A>		  19,20,21, 22,23,24, 25,26,27,  </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10335"></A>		  28,29,30, 31,32,33, 34,35,36,  </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10336"></A>		  37,38,39, 40,41,42, 43,44,45 }; </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10337"></A>	static comp_info compress_info;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10338"></A>	intn status;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10339"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10340"></A>	/* Initialize JPEG compression structure. */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10341"></A>	compress_info.jpeg.quality = 60;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10342"></A>	compress_info.jpeg.force_baseline = 1;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10343"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10344"></A>	/* Set JPEG compression for storing the image. */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10345"></A>	status = DFR8setcompress(COMP_JPEG, &amp;compress_info);</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10346"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10347"></A>	/* Write the 8-bit image data to file. */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10348"></A>	status = DFR8addimage(&quot;Example2.hdf&quot;, (VOIDP)raster_data, WIDTH, </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10349"></A>                          HEIGHT, COMP_JPEG);</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10350"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10351"></A>}</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10352"></A>&nbsp;</P>
</DIV>
<DIV>
<H4 CLASS="Code-F-Title">
<A NAME="50593876_pgfId-8229"></A><DIV>
<IMG SRC="UG_html-43.gif" ALT="">
</DIV>
FORTRAN:	</H4>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-8650"></A>	 PROGRAM COMPRESS RIS8</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10354"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10355"></A>      integer d8aimg, d8scomp, d8sjpeg, status</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10356"></A>      integer*4 WIDTH, HEIGHT, PIXEL_DEPTH, COMP_JPEG</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10357"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10358"></A>C     COMP_JPEG is defined in hcomp.h.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10359"></A>      parameter(WIDTH = 3,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10360"></A>     +          HEIGHT = 5,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10361"></A>     +          COMP_JPEG = 1,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10362"></A>     +          PIXEL_DEPTH = 3)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10363"></A>      character raster_data(PIXEL_DEPTH, WIDTH, HEIGHT) </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10364"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10365"></A>C     Initialize the image array.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10366"></A>      data raster_data </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10367"></A>     + /  1, 2, 3,  4, 5, 6,  7, 8, 9,  </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10368"></A>     +    10,11,12, 13,14,15, 16,17,18, </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10369"></A>     +    19,20,21, 22,23,24, 25,26,27,  </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10370"></A>     +    28,29,30, 31,32,33, 34,35,36,  </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10371"></A>     +    37,38,39, 40,41,42, 43,44,45  /</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10372"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10373"></A>C     Set compression.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10374"></A>      status = d8scomp(COMP_JPEG)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10375"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10376"></A>C     Set JPEG parameters to quality = 60, and turn compatibility on.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10377"></A>      status = d8sjpeg(60, 1)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10378"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10379"></A>C     Write the 8-bit image data to the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10380"></A>      status = d8aimg(’Example2.hdf’, raster_data, WIDTH, HEIGHT,</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10381"></A>     +              COMP_JPEG)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10382"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10383"></A>      end</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10384"></A>&nbsp;</P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-5363"></A>	6.3.4	Spe<A NAME="50593876_marker-8356"></A>cifying the Reference Number of an RIS8: DFR8writeref</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-5397"></A><EM CLASS="FunctionName">
DFR8writeref</EM>
<A NAME="50593876_marker-8357"></A> specifies the reference number of the image to be written when DFR8addimage or DFR8putimage is called. Use the following calling sequence to invoke <EM CLASS="FunctionName">
DFR8writeref</EM>
:</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-5398"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFR8writeref(filename, ref);</P>
<P CLASS="syntax">
<A NAME="50593876_pgfId-5170"></A>		status = DFR8addimage(filename, image, width, height, compress);</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-5171"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = d8wref(filename, ref)</P>
<P CLASS="syntax">
<A NAME="50593876_pgfId-5172"></A>		status = d8aimg(filename, image, width, height, compress)</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-5446"></A><EM CLASS="FunctionName">
DFR8writeref</EM>
 assigns the reference number passed in the <EM CLASS="VarName">
ref</EM>
 parameter to the next image the file specified by the <EM CLASS="VarName">
filename</EM>
 parameter. If the value of <EM CLASS="VarName">
ref</EM>
 is the same as the reference number of an existing RIS8, the existing raster image data will be overwritten. The parameters for <EM CLASS="FunctionName">
DFR8writeref</EM>
 are further described below. <A HREF="UG_html-6.htm#50593876_44140" CLASS="XRef">DFR8writeref Parameter List</A></P>
<P CLASS="Body">
<A NAME="50593876_pgfId-5419"></A>It is unlikely that you will need this routine, but if you do, use it with caution. It is not safe to assume that a reference number indicates the file position of the corresponding image as there is no guarantee that reference numbers appear in sequence in an HDF file.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593876_pgfId-5222"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
DFR8w<A NAME="50593876_marker-8358"></A>riteref Parameter List<A NAME="50593876_44140"></A></H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-9727"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-10622"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593876_pgfId-9728"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-9730"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-9732"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-9736"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-9742"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-9744"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-9748"></A>DFR8writeref</H6>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-10623"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-9749"></A>(d8wref)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-9751"></A>filename</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-9753"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-9755"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9757"></A>Name of the HDF file containing the raster image.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-9761"></A>ref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-9763"></A>uint16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-9765"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-9769"></A>Reference number for next call to <A NAME="50593876_marker-9767"></A><EM CLASS="Figure7ptBold">
DFR8getimage</EM>
<A NAME="50593876_marker-9768"></A>.</P>
</TD>
</TR>
</TABLE>
</DIV>
</DIV>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593876_pgfId-3419"></A>	6.4	Readi<A NAME="50593876_marker-8359"></A>ng 8-Bit Raster Images<DIV>
<IMG SRC="UG_html-39.gif" ALT="">
</DIV>
</H5>
<P CLASS="Body">
<A NAME="50593876_pgfId-3421"></A>The DFR8 programming model for reading an 8-bit raster image set is as follows:</P>
<DIV>
<H6 CLASS="FM1Step">
<A NAME="50593876_pgfId-3423"></A>Determine the dimensions of the image if they are not known prior to the read operation.</H6>
<OL>
<LI CLASS="Step">
<A NAME="50593876_pgfId-3425"></A>2.	Read the image from the file. </LI>
</OL>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-3438"></A>	6.4.1	Reading a Raster Image: DFR8getimage</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-5462"></A>I<A NAME="50593876_marker-8361"></A>f dimensions of the image are known, <EM CLASS="FunctionName">
DFR8getimage</EM>
 is the only function call needed to read a raster image. If a file is being opened for the first time, <EM CLASS="FunctionName">
DFR8getimage</EM>
 returns the first image in the file. Additional calls will return successive images in the file, therefore images are read in the order which they were written to the file. <EM CLASS="FunctionName">
DFR8getdims</EM>
 is called before <EM CLASS="FunctionName">
DFR8getimage</EM>
 so that space allocations for the image and palette can be checked and the dimensions verified. If this information is already known, <EM CLASS="FunctionName">
DFR8getdims</EM>
 may be omitted.</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-3442"></A>To read a raster image from an HDF file, the calling program must contain the following:</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-3444"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFR8getimage(filename, image, width, height, palette);</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-3446"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = d8gimg(filename, image, width, height, palette)			</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-3452"></A><EM CLASS="FunctionName">
DFR8getimage</EM>
 retrieves the next 8-bit image from the HDF file name specified by the <EM CLASS="VarName">
filename </EM>
parameter. If the image in the file is compressed, <EM CLASS="FunctionName">
DFR8getimage</EM>
 first decompresses it then places it in memory at the location pointed to by the <EM CLASS="VarName">
image</EM>
 parameter. The dimensions of the array allocated to hold the image are specified by the <EM CLASS="VarName">
width</EM>
 and <EM CLASS="VarName">
height</EM>
 parameters and may be larger than the actual image.The palette, if present, is stored in memory at the location pointed to by the <EM CLASS="VarName">
palette</EM>
 parameter. If it contains a <EM CLASS="DefName">
NULL</EM>
 value the palette is not loaded, even if there is one stored with the image. The parameters for <EM CLASS="FunctionName">
DFR8getimage</EM>
 are defined further in <EM CLASS="Body">
<A HREF="UG_html-6.htm#50593876_14751" CLASS="XRef">Table 6G</A></EM>
 below. </P>
<P CLASS="Body">
<A NAME="50593876_pgfId-3454"></A>Notice that in <A HREF="UG_html-6.htm#50593876_27453" CLASS="XRef">Compressing and Writing a 8-Bit Raster Image</A>, as in the case of <EM CLASS="FunctionName">
DFR8addimage</EM>
, the order in which the dimensions for the image array are declared differs between C and FORTRAN-77. FORTRAN-77 declarations require the width before the height while the C declaration requires the height before the width as FORTRAN-77 arrays are stored in column-major order, while C arrays are stored in row-major order. (row-major order implies that the second coordinate varies fastest). When <EM CLASS="FunctionName">
d8gimg</EM>
 reads an image from a file, it assumes column-major order.</P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-3456"></A>	6.4.2	Q<A NAME="50593876_marker-8362"></A>uerying the Dimensions of an 8-Bit Raster Image: DFR8getdims</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-3458"></A><EM CLASS="FunctionName">
DFR8getdims</EM>
<A NAME="50593876_marker-8363"></A> opens a named file, finds the next image or the first image if the file is being opened for the first time, retrieves the dimensions of the image and determines if there is a palette associated with the image. If the file is being opened for the first time, <EM CLASS="FunctionName">
DFR8getdims</EM>
 returns information about the first image in the file. If an image has already been read, <EM CLASS="FunctionName">
DFR8getdims</EM>
 finds the next image. In this way, images are read in the same order in which they were written to the file.</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-3460"></A>To determine the dimensions of an image before attempting to read it, the calling program must include the following routines:</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-3462"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFR8getdims(filename, width, height, haspalette);</P>
<P CLASS="syntax">
<A NAME="50593876_pgfId-3464"></A>		status = DFR8getimage(filename, image, width, height, palette);</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-3466"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = d8gdim(filename, width, height, haspalette)</P>
<P CLASS="syntax">
<A NAME="50593876_pgfId-5479"></A>		status = d8gimg(filename, image, width, height, palette)			</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-5488"></A><EM CLASS="FunctionName">
DFR8getdims</EM>
 retrieves dimension and palette information about the next 8-bit image in the file specified by <EM CLASS="VarName">
filename</EM>
. The returned information is pointed to by the <EM CLASS="VarName">
width</EM>
 and <EM CLASS="VarName">
height</EM>
 parameters. The <EM CLASS="VarName">
haspalette</EM>
 parameter determines the presence of a palette and returns a value of 1 if it exists and 0 otherwise. The parameters for <EM CLASS="FunctionName">
DFR8getdims</EM>
 are defined further in the following table.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593876_pgfId-1951"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
<A NAME="50593876_14751"></A>DFR8<A NAME="50593876_marker-8364"></A>getdims and D<A NAME="50593876_marker-8365"></A>FR8getimage Parameter List</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6991"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-10624"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6992"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6994"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-6998"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-7000"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-7006"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-7008"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="4" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-7012"></A>DFR8getdims</H6>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-10625"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-7013"></A>(d8gdims)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7015"></A>filename</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7017"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7019"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-7021"></A>Name of the HDF file containing the set of raster images.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7025"></A>width</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7027"></A>int32 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7029"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-7031"></A>Number of columns in the next raster image.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7035"></A>height</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7037"></A>int32 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7039"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-7041"></A>Number of rows in the next raster image.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7045"></A>ispalette</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7047"></A>intn *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7049"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-7051"></A>“1” if a palette exists, otherwise “0”.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="5" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-7053"></A>DFR8getimage</H6>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-10626"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-7054"></A>(d8gimg)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7056"></A>filename</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7058"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7060"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-7062"></A>Name of HDF file with the raster image.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7066"></A>image</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7068"></A>uint8 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7070"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-7072"></A>Buffer for the raster image.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7076"></A>width</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7078"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7080"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-7082"></A>Width of the raster image buffer.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7086"></A>height</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7088"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7090"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-7092"></A>Height of the raster image buffer.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7096"></A>palette</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7098"></A>uint8 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7100"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-7102"></A>Palette assigned to the raster image.</P>
</TD>
</TR>
</TABLE>
</DIV>
<DIV>
<H6 CLASS="Example">
<A NAME="50593876_pgfId-1952"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
Reading an 8-Bit Raster Image</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-1953"></A>The following examples search the &quot;Example1.hdf&quot; file created in <A HREF="UG_html-6.htm#50593876_24421" CLASS="XRef">Writing an 8-Bit Raster Image to an HDF File</A> for the dimensions of an 8-bit image. Although the <EM CLASS="FunctionName">
DFR8getdims</EM>
 call is optional, it is included as a demonstration of how to check the dimensions of an image. This example also assumes that the data set does not include a palette, therefore <EM CLASS="DefName">
NULL</EM>
 is passed as the palette parameter. If the palette argument is <EM CLASS="DefName">
NULL</EM>
 (or &quot;0&quot; in FORTRAN-77), all palette data is ignored. </P>
</DIV>
</DIV>
</DIV>
</DIV>
<DIV>
<H4 CLASS="Code-C-Title">
<A NAME="50593876_pgfId-9488"></A><DIV>
<IMG SRC="UG_html-43.gif" ALT="">
</DIV>
C:		</H4>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10067"></A>#include &quot;hdf.h&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10391"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10392"></A>#define WIDTH 5</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10393"></A>#define HEIGHT 6</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10394"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10395"></A>main( )</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10396"></A>{</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10397"></A>	uint8 raster_data[HEIGHT][WIDTH];</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10398"></A>	int32 width, height;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10399"></A>	intn haspal, status;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10400"></A>    </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10401"></A>	/* Get the dimensions of the image */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10402"></A>	status = DFR8getdims(&quot;Example1.hdf&quot;, &amp;width, &amp;height, &amp;haspal);</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10403"></A>    </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10404"></A>	/* Read the raster data if the dimensions are correct */</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10405"></A>	if (width &lt;= WIDTH &amp;&amp; height &lt;= HEIGHT)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10406"></A>		status = DFR8getimage(&quot;Example1.hdf&quot;, (VOIDP)raster_data, width, </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10407"></A>						height, NULL);</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10408"></A>    </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10409"></A>}</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10410"></A>&nbsp;</P>
</DIV>
<DIV>
<H4 CLASS="Code-F-Title">
<A NAME="50593876_pgfId-9490"></A><DIV>
<IMG SRC="UG_html-43.gif" ALT="">
</DIV>
FORTRAN:	</H4>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-3535"></A>	 PROGRAM RASTER8      </P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10412"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10413"></A>      character*1 image(5, 6)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10414"></A>      integer status, height, width, d8gimg, d8gdims, haspal</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10415"></A>      integer*4 width, height</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10416"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10417"></A>C     Get the dimensions of the image.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10418"></A>      status = d8gdims(’Example1.hdf’, width, height, haspal)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10419"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10420"></A>C     Read the raster data if the dimensions are correct.</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10421"></A>      if (width .le. 5 .and. height .le. 6) then</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10422"></A>         status = d8gimg(’Example1.hdf’, image, width, height, 0)</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10423"></A>      endif</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10424"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10425"></A>      end</P>
<P CLASS="ExampleCode">
<A NAME="50593876_pgfId-10426"></A>&nbsp;</P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-3563"></A>	6.4.3	Rea<A NAME="50593876_marker-8366"></A>ding an Image with a Given Reference Number: DFR8readref</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-3569"></A><EM CLASS="FunctionName">
DFR8readref</EM>
<A NAME="50593876_marker-8367"></A> accesses specific images that are stored in files containing multiple raster image sets. It is an optionally used before <EM CLASS="FunctionName">
DFR8getimage</EM>
 to set the access pointer to the specified raster image. <EM CLASS="FunctionName">
DFR8readref</EM>
 can be used in connection with vgroups, which identify their members by tag/reference number pairs. See Chapter 5, titled Vgroups (V API), for a discussion of vgroups and tag/reference number pairs.</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-3576"></A>To access a specific raster image set, use the following calling sequence:</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-3578"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFR8readref(filename, ref);</P>
<P CLASS="syntax">
<A NAME="50593876_pgfId-3580"></A>		status = DFR8getimage(filename, image, width, height, palette);</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-3582"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = d8rref(filename, ref)</P>
<P CLASS="syntax">
<A NAME="50593876_pgfId-3584"></A>		status = d8gimg(filename, image, width, height, palette)</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-11002"></A><EM CLASS="FunctionName">
DFR8readref</EM>
 specifies that the target for the next read operation performed on the HDF file specified by the <EM CLASS="VarName">
filename</EM>
 parameter is the object with the reference number named in the <EM CLASS="VarName">
ref</EM>
 parameter. <A NAME="50593876_marker-11003"></A><A NAME="50593876_marker-11005"></A>The parameters required for <EM CLASS="FunctionName">
DFR8readref</EM>
 are defined further in the following table.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593876_pgfId-11055"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
<A NAME="50593876_12155"></A>DF<A NAME="50593876_marker-11008"></A>R8readref Parameter List</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11011"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-11012"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11013"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11015"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11017"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11021"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11027"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11029"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-11033"></A>DFR8readref</H6>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-11034"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-11035"></A>(d8rref)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-11037"></A>filename</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-11039"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-11041"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11043"></A>Name of HDF file containing the raster image.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-11047"></A>ref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-11049"></A>uint16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-11051"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-11054"></A>Reference number for next call to <A NAME="50593876_marker-11053"></A>DFR8getimage.</P>
</TD>
</TR>
</TABLE>
</DIV>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-5672"></A>	6.4.4	Sp<A NAME="50593876_marker-8369"></A>ecifying the Next 8-Bit Raster Image to be Read: DFR8restart</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-5673"></A><EM CLASS="FunctionName">
DFR8restart</EM>
<A NAME="50593876_marker-8370"></A> causes the next call to <EM CLASS="FunctionName">
DFR8getimage</EM>
 or <EM CLASS="FunctionName">
DFR8getdims</EM>
 to read the first raster image set in the file. Use the following call to invoke <EM CLASS="FunctionName">
DFR8restart</EM>
:</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-5678"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFR8restart( );</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-5679"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = d8first( )<A NAME="50593876_marker-8360"></A></P>
</DIV>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593876_pgfId-7326"></A>	6.5	8-Bit R<A NAME="50593876_marker-8392"></A>aster Image Information Retrieval Routines<DIV>
<IMG SRC="UG_html-39.gif" ALT="">
</DIV>
</H5>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-7327"></A>	6.5.1	Qu<A NAME="50593876_marker-8373"></A>erying the Total Number of 8-Bit Raster Images: DFR8nimages</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-7328"></A><EM CLASS="FunctionName">
DFR8nimages</EM>
<A NAME="50593876_marker-8374"></A> returns the total number of 8-bit raster image sets in a file and has the following syntax:</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-5622"></A><EM CLASS="syntaxLang">
C:</EM>
		num_of_images = DFR8nimages(filename);</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-5626"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	num_of_images = d8nimg(filename)</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593876_pgfId-3645"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
<A NAME="50593876_marker-3636"></A>D<A NAME="50593876_15192"></A><A NAME="50593876_marker-3640"></A><A NAME="50593876_15192"></A>FR<A NAME="50593876_marker-8377"></A>8nimages Parameter List</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-7260"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-10630"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593876_pgfId-7261"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-7263"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-7267"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-7269"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-7275"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-7277"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-7281"></A>DFR8nimages</H6>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-10631"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-7282"></A>(d8nims)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7284"></A>filename</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7286"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-7288"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-7290"></A>Name of the HDF file.</P>
</TD>
</TR>
</TABLE>
</DIV>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-5344"></A>	6.5.2	Determinin<A NAME="50593876_marker-8378"></A>g the Reference Number of the Most-Recently-Accessed <BR>
		8-Bit Raster Image: DFR8lastref</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-5345"></A><EM CLASS="FunctionName">
DFR8lastref</EM>
<A NAME="50593876_marker-8379"></A> returns the reference number most recently used in writing or reading an 8-bit raster image. This routine is primarily used for attaching annotations to images and adding images to vgroups. (See Chapters 8, titled Annotations (DFAN API) and Chapter 5, titled Vgroups (V API) for more detailed information on how to use reference numbers in connection with these applications.)</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-5791"></A>The following calling sequence uses <EM CLASS="FunctionName">
DFR8lastref</EM>
 to find the reference number of the 8-bit raster image most recently added to an HDF file:</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-11819"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFR8addimage(filename, image, width, height, compress);</P>
<P CLASS="syntax">
<A NAME="50593876_pgfId-11820"></A>		lastref = DFR8lastref( );</P>
<P CLASS="FM1-syntax">
<A NAME="50593876_pgfId-11821"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = d8aimg(filename, image, width, height, compress)</P>
<P CLASS="syntax">
<A NAME="50593876_pgfId-5812"></A>		lastref = d8lref( )</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-5813"></A><EM CLASS="FunctionName">
DFR8putimage</EM>
 or <EM CLASS="FunctionName">
DFR8getimage</EM>
 can be used instead of <EM CLASS="FunctionName">
DFR8addimage</EM>
 with similar results.<A NAME="50593876_marker-8315"></A></P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-8568"></A>	6.5.3	Determinin<A NAME="50593876_marker-8567"></A>g the Reference Number of the Palette of the <BR>
		Most-Recently-Accessed 8-Bit Raster Image: DFR8getpalref</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-8570"></A><EM CLASS="FunctionName">
DFR8getpalref</EM>
<A NAME="50593876_marker-8569"></A> returns the reference number of the palette associated with the most recently used in writing or reading an 8-bit raster image. The <EM CLASS="FunctionName">
DFR8getdims</EM>
 routine must be called before <EM CLASS="FunctionName">
DFR8getpalref</EM>
, as <EM CLASS="FunctionName">
DFR8getdims</EM>
 initializes internal structures required by <EM CLASS="FunctionName">
DFR8getpalref</EM>
.</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-8625"></A>There is currently no FORTRAN-77 version of the <EM CLASS="FunctionName">
DFR8getpalref</EM>
 routine.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593876_pgfId-8624"></A><DIV>
<IMG SRC="UG_html-40.gif" ALT="">
</DIV>
DFR<A NAME="50593876_marker-8590"></A>8nimages Parameter List</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-11469"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-10471"></A>[Return Type]</H6>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-10473"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-10475"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-10477"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593876_pgfId-10483"></A>C</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593876_pgfId-10487"></A>DFR8getpalref</H6>
<H6 CLASS="ReturnType">
<A NAME="50593876_pgfId-10633"></A>[intn]</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-10489"></A>pal_ref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593876_pgfId-10491"></A>uint16 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593876_pgfId-10493"></A>Pointer to the returned reference number of the palette.</P>
</TD>
</TR>
</TABLE>
</DIV>
</DIV>
</DIV>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593876_pgfId-8675"></A>	6.6	RIS8 Backward Compatibility Issues<DIV>
<IMG SRC="UG_html-39.gif" ALT="">
</DIV>
</H5>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-8669"></A>	6.6.1	Attribute &quot;long_name&quot; Included in HDF for netCDF Compatibility</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-8670"></A>In several routines of the RIS8 interface, the value returned by <EM CLASS="VarName">
label</EM>
 is the value of the attribute named &quot;long_name&quot; and that the value returned by <EM CLASS="VarName">
coordsys</EM>
 is the value of the attribute named &quot;coordsys&quot;.</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-8671"></A>This was done in order to provide HDF with the ability to read netCDF files. While this aspect of HDF functionality will not affect its ability to read HDF data files written by programs compiled with earlier versions of HDF, it is advisable for HDF users to know this to be aware of the significance of the &quot;long_name&quot; and &quot;coordsys&quot; attribute names in a list of attributes.</P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593876_pgfId-8672"></A>	6.6.2	Raster Image Group Implementation with New RIS8 Tags</H6>
<P CLASS="Body">
<A NAME="50593876_pgfId-8673"></A>As HDF has evolved, a variety of structures have been used to store raster image sets. For instance, HDF first began grouping 8-bit raster images together with dimensions and palettes by insuring that their reference numbers fell in a certain pattern. This method of organizing raster images quickly lead to very complicated collections of images, dimension records, and palettes, and eventually was replaced by an specific grouping structure known as a <EM CLASS="Definition">
Raster Image Group</EM>
, or <EM CLASS="Definition">
RIG</EM>
, with a completely new set of tags. </P>
<P CLASS="Body">
<A NAME="50593876_pgfId-8674"></A>To maintain backward compatibility with older versions of HDF, the RIS8 interface supported by HDF version 4.1 and later recognizes raster images stored using either set of HDF tags. Details on the different tags and structures used to store raster images can be found in the <EM CLASS="TextItalic">
HDF Specifications and Developer’s Guide v3.2</EM>
 from the HDF web site at <EM CLASS="URL">
http://www.hdfgroup.org/</EM>
.</P>
<P CLASS="Body">
<A NAME="50593876_pgfId-8667"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="50593877_pgfId-23412"></A>&nbsp;</P>
</DIV>
</DIV>
</DIV>
<HR><P><table id="Botofpage" border="0" width="850" cellspacing="0" cellpadding="0">      <tr>        <td align="left">        HDF 4.2.10 - February 2014<br/>        <a href="THG_Copyright.html">Copyright</a>        <td align="right">          <span style="font-size: 12px; font-weight: bold">            The HDF Group<br />          </span>          <span style="font-size: 12px">            <a href="http://www.hdfgroup.org">www.hdfgroup.org</a><br />            <img valign="bottom" border="0" src="images/help.jpg" height="12" alt="The HDF Group" valign="top" />          </span>        </td>      </tr>    </table></BODY>
</HTML>
