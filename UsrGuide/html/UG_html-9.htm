<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 11.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="UG_html.css" CHARSET="UTF-8" TYPE="text/css">
<table id="Topofpage" border="0" width="850" cellspacing="0" cellpadding="0"><tr><td align="left"><a href="http://www.hdfgroup.org"><img id="THG_logo" border="0" src="images/hdf_logo.jpg" width="90" height="70" alt="The HDF Group" valign="top" /></a></td><td valign="middle" align="center"><H1>HDF Userâ€™s Guide</H1><span style="font-size: 14px; font-weight: bold"><b>4.2.10</b></td><td valign="middle" align="center"><a HREF=UG_html.htm> [Top]</a> <a HREF=UG_html-8.htm> [Prev]</a><a HREF=UG_html-10.htm> [Next]</a></td></tr></table><HR></HEAD>
<BODY>
<DIV>
<span style="font-size: 14px; font-weight: bold"><a href="UG_html-17.htm">Index</a>] [<a href="UG_html-20.htm">List of Examples</a>] [<a href="UG_html-19.htm">List of Tables</a>] [<a href="UG_html-18.htm">List of Figures</a>]</DIV>
<H1 CLASS="ChapterTitle">
<A NAME="50593879_pgfId-36134"></A>Chapter 9 --	<A NAME="50593879_marker-36132"></A><A NAME="50593879_27404"></A>Palettes (DFP API)</H1>
<DIV>
<H4 CLASS="Heading1">
<A NAME="50593879_pgfId-36136"></A>	9.1	Chapter Overview<DIV>
<IMG SRC="UG_html-57.gif" ALT="">
</DIV>
</H4>
<P CLASS="Body">
<A NAME="50593879_pgfId-4490"></A>This chapter describes the routines available for storing and retrieving 8-bit palettes. An 8-bit palette is a look-up table with 256 entries, one entry for each of the 256 possible pixel values the system hardware associates with a particular color. This chapter introduces and describes the HDF palette data model and the DFP interface.</P>
<P CLASS="Body">
<A NAME="50593879_pgfId-17359"></A><EM CLASS="Definition">
Note</EM>
: This interface is now deprecated and superseded by the <A HREF="UG_html-8.htm#50593878_29022" CLASS="XRef">General Raster Images (GR API)</A> interface (Chapter 8.)</P>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593879_pgfId-3601"></A>	9.2	The Palette Data Model<DIV>
<IMG SRC="UG_html-57.gif" ALT="">
</DIV>
</H5>
<P CLASS="Body">
<A NAME="50593879_pgfId-1180"></A>A<A NAME="50593879_marker-3810"></A> <EM CLASS="Definition">
palette</EM>
 is the means by which color is applied to an image and is also referred to as a <EM CLASS="Definition">
color lookup table</EM>
. It is a table in which every row contains the numerical representation of a particular color. Palettes can be many different sizes, but HDF only supports palettes with 256 colors, corresponding to the 256 different possible pixel values (0 to 255) in 8-bit raster images. </P>
<P CLASS="Body">
<A NAME="50593879_pgfId-1674"></A>For each of the 256 colors in a palette, there are three 8-bit numbers describing its appearance. <A HREF="UG_html-9.htm#50593879_15496" CLASS="XRef">(See Figure 9a)</A> Each 8-bit <EM CLASS="Definition">
color component</EM>
<A NAME="50593879_marker-1607"></A> represents the amount of red (or &quot;R&quot;), green (or &quot;G&quot;), or blue (or &quot;B&quot;) used to create a particular color. In HDF, 8-bit palettes are assumed to be organized as follows; each entry consists of three bytes: one each for R, G, and B value. The first group of three bytes represent the R, G, and B values of the first color in the palette; the next three the R, G, and B values of the second color; and so forth. Therefore, the 256 possible different pixel values in an image serve as an index for the 256 color entries stored in the palette.</P>
<DIV>
<H6 CLASS="Figure">
<A NAME="50593879_pgfId-1695"></A><DIV>
<IMG SRC="UG_html-58.gif" ALT="">
</DIV>
FIGURE 9a	<A NAME="50593879_15496"></A>Col<A NAME="50593879_marker-3814"></A>or Mapping Using a Palette</H6>
<DIV>
<IMG SRC="UG_html-59.gif" ALT="">
</DIV>
<P CLASS="Body">
<A NAME="50593879_pgfId-6513"></A>In the HDF library, there are four interfaces that support the reading and writing of palette data; the raster image interfaces, covered in <EM CLASS="Body">
<A HREF="UG_html-6.htm#50593876_20224" CLASS="XRef">8-Bit Raster Images (DFR8 API)</A></EM>
, <EM CLASS="Body">
<A HREF="UG_html-7.htm#50593877_18201" CLASS="XRef">24-bit is it Raster Images (DF24 API)</A></EM>
, <EM CLASS="Body">
<A HREF="UG_html-9.htm#50593879_27404" CLASS="XRef">Palettes (DFP API)</A></EM>
, and the DFP palette interface covered in this chapter. The raster image interfaces store palettes with raster images and the palette interface reads and writes palettes outside of raster image sets. Palettes stored using the palette interface are stored as isolated data objects. In other words they are not included as members of any set, although they can be grouped with other objects using the Vgroup interface. For more information on the Vgroup interface, refer to <A HREF="UG_html-5.htm#50593875_34180" CLASS="XRef">Vgroups (V API)</A>.</P>
</DIV>
</DIV>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593879_pgfId-6539"></A>	9.3	The Pa<A NAME="50593879_marker-6538"></A>lette API<DIV>
<IMG SRC="UG_html-57.gif" ALT="">
</DIV>
</H5>
<P CLASS="Body">
<A NAME="50593879_pgfId-1122"></A>The DFP interface consists of eight routines. The routines DFPaddpal and DFPgetpal are the primary routines for palette I/O and are used for most reading and writing operations. </P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593879_pgfId-1123"></A>	9.3.1	Palet<A NAME="50593879_marker-3816"></A>te Library Routines</H6>
<P CLASS="Body">
<A NAME="50593879_pgfId-1207"></A>All C functions in the palette interface are prefaced by &quot;DFP&quot; and the equivalent FORTRAN-77 functions are prefaced by &quot;dp&quot;. These routines are divided into the following categories:</P>
<UL>
<LI CLASS="Bullet">
<A NAME="50593879_pgfId-1209"></A><EM CLASS="Definition">
Write routines</EM>
 store palettes in new files or append them to existing files. </LI>
<LI CLASS="Bullet">
<A NAME="50593879_pgfId-1211"></A><EM CLASS="Definition">
Read routines</EM>
 sequentially or randomly locate palettes to be read from a named file. </LI>
</UL>
<P CLASS="Body">
<A NAME="50593879_pgfId-1217"></A>The DFP function calls are more explicitly defined in the following table and in the <EM CLASS="TextItalic">
HDF Reference Guide</EM>
.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593879_pgfId-1222"></A><DIV>
<IMG SRC="UG_html-58.gif" ALT="">
</DIV>
DFP Li<A NAME="50593879_marker-3817"></A>brary Routines<A NAME="50593879_84901"></A></H6>
<TABLE>
<TR>
<TH ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4023"></A>Category</P>
</TH>
<TH ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4025"></A>Routine Names</P>
</TH>
<TH ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4029"></A>Description</P>
</TH>
</TR>
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4033"></A>C</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4035"></A>FORTRAN-77</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="3" COLSPAN="1">
<P CLASS="TableCategory">
<A NAME="50593879_pgfId-4039"></A> Write</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4041"></A>DFPaddpal</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4043"></A>dpapal</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4045"></A>Appends a palette to a file.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4049"></A>DFPputpal</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4051"></A>dpppal</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4053"></A>Writes a palette to a file.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4057"></A>DFPwriteref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4059"></A>dpwref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4061"></A>Sets the reference number for writing the next palette.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="5" COLSPAN="1">
<P CLASS="TableCategory">
<A NAME="50593879_pgfId-4063"></A> Read</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4065"></A>DFPgetpal</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4067"></A>dpgpal</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4069"></A>Retrieves the next palette in a file.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4427"></A>DFPlastref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4429"></A>dplref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4431"></A>Returns the value of the last reference number read or written.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4435"></A>DFPnpals</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4437"></A>dpnpals</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4439"></A>Returns the number of palettes in a file.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4073"></A>DFPreadref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4075"></A>dprref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4077"></A>Sets reference number for retrieving the next palette.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4097"></A>DFPrestart</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593879_pgfId-4099"></A>dprest</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4101"></A>Specifies that the next read call will get the first palette in the file.</P>
</TD>
</TR>
</TABLE>
</DIV>
</DIV>
</DIV>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593879_pgfId-1228"></A>	9.4	Writi<A NAME="50593879_marker-3818"></A>ng Palettes<DIV>
<IMG SRC="UG_html-57.gif" ALT="">
</DIV>
</H5>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593879_pgfId-1232"></A>	9.4.1	Writing a Palette: DFPaddpal and DFPputpal</H6>
<P CLASS="Body">
<A NAME="50593879_pgfId-6209"></A>To write a palette to an HDF file, the calling program must contain one of the following function calls:</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-6210"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFPaddpal(filename, palette);</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-6211"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = dpapal(filename, palette)</P>
<P CLASS="syntax">
<A NAME="50593879_pgfId-6212"></A>	<EM CLASS="syntaxLang">
OR</EM>
</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-1242"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFPputpal(filename, palette, overwrite, filemode);</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-1244"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = dpppal(filename, palette, overwrite, filemode)</P>
<P CLASS="Body">
<A NAME="50593879_pgfId-1246"></A><EM CLASS="FunctionName">
DFPaddpal</EM>
<A NAME="50593879_marker-3820"></A> and <EM CLASS="FunctionName">
DFPputpal</EM>
<A NAME="50593879_marker-3821"></A> will write a palette to an HDF file named by <EM CLASS="VarName">
filename</EM>
. When given a new filename, <EM CLASS="FunctionName">
DFPputpal</EM>
 and <EM CLASS="FunctionName">
DFPaddpal</EM>
 creates a new file and writes the palette as the first object in the file. When given an existing filename, <EM CLASS="FunctionName">
DFPaddpal</EM>
 appends the palette to the end of the file. </P>
<P CLASS="Body">
<A NAME="50593879_pgfId-1185"></A><EM CLASS="FunctionName">
DFPputpal</EM>
 provides this functionality as well with additional options for how the data is handled, providing more control over how a palette is written to file than <EM CLASS="FunctionName">
DFPaddpal</EM>
. Specifically, the <EM CLASS="VarName">
overwrite</EM>
 parameter determines whether or not to overwrite the last palette written to a file or to append a new palette onto the file. The <EM CLASS="VarName">
filemode</EM>
 parameter determines whether to create a new file or to append the data to the previous file. Note the combination to overwrite a palette in a newly created file is invalid and will generate an error. To overwrite a palette, <EM CLASS="VarName">
filename</EM>
 must be the same filename as the last file accessed through the DFP interface. The parameters for <EM CLASS="FunctionName">
DFPaddpal</EM>
 and <EM CLASS="FunctionName">
DFPputpal</EM>
 are more explicitly defined in the following table.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593879_pgfId-1281"></A><DIV>
<IMG SRC="UG_html-58.gif" ALT="">
</DIV>
<A NAME="50593879_87699"></A>DFPput<A NAME="50593879_marker-3822"></A>pal and DFP<A NAME="50593879_marker-3823"></A>addpal Parameter List</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4109"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593879_pgfId-4442"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4110"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4112"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4114"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4118"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4124"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4126"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="4" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593879_pgfId-4130"></A>DFPputpal</H6>
<H6 CLASS="ReturnType">
<A NAME="50593879_pgfId-4443"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593879_pgfId-4131"></A>(dpppal)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="Table-Parameter">
<A NAME="50593879_pgfId-4133"></A>filename</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4135"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4137"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4139"></A>Name of the HDF file.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="Table-Parameter">
<A NAME="50593879_pgfId-4143"></A>palette</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4145"></A>VOIDP</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4147"></A>&lt;valid numeric data type&gt;</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4149"></A>768-byte space for palette.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="Table-Parameter">
<A NAME="50593879_pgfId-4153"></A>overwrite</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4155"></A>intn</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4157"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4159"></A>Palette write specification.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="Table-Parameter">
<A NAME="50593879_pgfId-4163"></A>filemode</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4165"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4167"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4169"></A>File write specification.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593879_pgfId-4171"></A>DFPaddpal</H6>
<H6 CLASS="ReturnType">
<A NAME="50593879_pgfId-4444"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593879_pgfId-4172"></A>(dpapal)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="Table-Parameter">
<A NAME="50593879_pgfId-4174"></A>filename</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4176"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4178"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4180"></A>Name of the HDF file.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="Table-Parameter">
<A NAME="50593879_pgfId-4184"></A>palette</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4186"></A>VOIDP</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4188"></A>&lt;valid numeric data type&gt;</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4190"></A>768-byte space with palette.</P>
</TD>
</TR>
</TABLE>
<P CLASS="Body">
<A NAME="50593879_pgfId-1259"></A>Calling <EM CLASS="FunctionName">
DFPaddpal</EM>
 or <EM CLASS="FunctionName">
DFPputpal</EM>
 immediately after writing an 8-bit raster image will not group the palette with the preceding image. Palettes written to a file sequentially can be retrieved sequentially. However, to maintain a higher level of organization between multiple palettes and images stored in the same file, itâ€™s a good idea to explicitly group each palette with the image to which it belongs. To find out more about assigning a palette to an image, see <EM CLASS="Body">
<A HREF="UG_html-6.htm#50593876_20224" CLASS="XRef">8-Bit Raster Images (DFR8 API)</A></EM>
.</P>
</DIV>
<DIV>
<H6 CLASS="Example">
<A NAME="50593879_pgfId-1261"></A><DIV>
<IMG SRC="UG_html-58.gif" ALT="">
</DIV>
Writing a Palette</H6>
<P CLASS="Body">
<A NAME="50593879_pgfId-4574"></A>In the following code examples, <EM CLASS="FunctionName">
DFPaddpal</EM>
 is used to write a palette to an HDF file named &quot;Example1.hdf&quot;.</P>
</DIV>
</DIV>
</DIV>
</DIV>
<DIV>
<H4 CLASS="Code-C-Title">
<A NAME="50593879_pgfId-4575"></A><DIV>
<IMG SRC="UG_html-60.gif" ALT="">
</DIV>
C:		</H4>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4578"></A>#include &quot;hdf.h&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4579"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4580"></A>main( )</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4581"></A>{</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4582"></A>	uint8 palette_data[768];</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4583"></A>	intn i;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4584"></A>	int32 status;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4585"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4586"></A>	/* Initialize the palette to grayscale. */</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4587"></A>	for (i = 0; i &lt; 256; i++) {</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4588"></A>	  palette_data[i * 3] = i;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4589"></A>	  palette_data[i * 3 + 1] = i;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4590"></A>	  palette_data[i * 3 + 2] = i;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4591"></A>	}</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4592"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4593"></A>	/* Write the palette to file. */</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4594"></A>	status = DFPaddpal(&quot;Example1.hdf&quot;, (VOIDP)palette_data);</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4595"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4596"></A>}</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4598"></A>&nbsp;</P>
</DIV>
<DIV>
<H4 CLASS="Code-F-Title">
<A NAME="50593879_pgfId-4599"></A><DIV>
<IMG SRC="UG_html-60.gif" ALT="">
</DIV>
FORTRAN:	</H4>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-1301"></A>	 PROGRAM WRITE PALETTE</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4358"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4359"></A>      integer dpapal, status, i</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4360"></A>      character palette_data(768)</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4361"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4362"></A>C     Initialize the palette to greyscale.</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4363"></A>      do 10, i = 1, 256</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4364"></A>        palette_data((i - 1) * 3 + 1) = char(i - 1)</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4365"></A>        palette_data((i - 1) * 3 + 2) = char(i - 1) </P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4366"></A>        palette_data((i - 1) * 3 + 3) = char(i - 1)</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4367"></A>10     continue</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4368"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4369"></A>C     Write the palette to the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4370"></A>      status = dpapal(â€™Example1.hdfâ€™, palette_data)</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4371"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4372"></A>      end</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4373"></A>&nbsp;</P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593879_pgfId-1861"></A>	9.4.2	Specifying<A NAME="50593879_marker-3824"></A> the Reference Number of a Palette: DFPwriteref</H6>
<P CLASS="Body">
<A NAME="50593879_pgfId-1862"></A><EM CLASS="FunctionName">
DFPwriteref</EM>
<A NAME="50593879_marker-3825"></A> specifies the reference number of the palette to be written on the next call to <EM CLASS="FunctionName">
DFPaddpal</EM>
 or <EM CLASS="FunctionName">
DFPputpal</EM>
:</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-1863"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFPwriteref(filename, ref);</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-4501"></A>		status = DFPaddpal(filename, palette);</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-4503"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = dpwref(filename, ref)</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-1866"></A>		status = dpapal(filename, palette)</P>
<P CLASS="Body">
<A NAME="50593879_pgfId-1867"></A><EM CLASS="FunctionName">
DFPwriteref</EM>
 assigns the specified reference number to the next palette written to the file <EM CLASS="VarName">
filename</EM>
. If the value of <EM CLASS="VarName">
ref</EM>
 is the same as the reference number of an existing palette, the existing palette will be overwritten. </P>
<P CLASS="Body">
<A NAME="50593879_pgfId-3160"></A>The parameters of <EM CLASS="FunctionName">
DFPwriteref</EM>
 are further described in the following table.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593879_pgfId-1916"></A><DIV>
<IMG SRC="UG_html-58.gif" ALT="">
</DIV>
DFPwrit<A NAME="50593879_marker-3826"></A>eref Parameter List<A NAME="50593879_44140"></A></H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4200"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593879_pgfId-4447"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4201"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4203"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4205"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4209"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4215"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-4217"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593879_pgfId-4221"></A>DFPwriteref</H6>
<H6 CLASS="ReturnType">
<A NAME="50593879_pgfId-4448"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593879_pgfId-4222"></A>(dpwref)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="Table-Parameter">
<A NAME="50593879_pgfId-4224"></A>filename</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4226"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4228"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4230"></A>Name of the HDF file containing the palette.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="Table-Parameter">
<A NAME="50593879_pgfId-4234"></A>ref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4236"></A>uint16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-4238"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-4240"></A>Reference number for the next call to DFPaddpal or DFPputpal.<A NAME="50593879_marker-4241"></A></P>
</TD>
</TR>
</TABLE>
</DIV>
</DIV>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593879_pgfId-1360"></A>	9.5	Rea<A NAME="50593879_marker-3827"></A>ding a Palette<DIV>
<IMG SRC="UG_html-57.gif" ALT="">
</DIV>
</H5>
<P CLASS="Body">
<A NAME="50593879_pgfId-1362"></A>The DFP programming model for reading a palette is similar to that for writing a palette - only the palette read call is required. </P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593879_pgfId-1364"></A>	9.5.1	Reading a Palette: DFPgetpal</H6>
<P CLASS="Body">
<A NAME="50593879_pgfId-1366"></A><EM CLASS="FunctionName">
DFPgetpal</EM>
<A NAME="50593879_marker-3829"></A> is the only function required to read a palette. If the file is being opened for the first time, <EM CLASS="FunctionName">
DFPgetpal</EM>
 returns the first palette in the file. Subsequent calls will return successive palettes in the file. In this way palettes are read in the same order in which they were written to the file.</P>
<P CLASS="Body">
<A NAME="50593879_pgfId-1368"></A>To read a palette from an HDF file, the calling program must contain the following routines:</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-1370"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFPgetpal(filename, palette);</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-1372"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = dpgpal(filename,palette)</P>
<P CLASS="Body">
<A NAME="50593879_pgfId-1378"></A><EM CLASS="FunctionName">
DFPgetpal</EM>
 retrieves the next palette from the HDF file specified by <EM CLASS="VarName">
filename</EM>
. The space allocated for the palette is specified by palette and must be at least 768 bytes. When <EM CLASS="FunctionName">
DFPgetpal</EM>
 is first called, it returns the first palette in the file. Subsequent calls to <EM CLASS="FunctionName">
DFPgetpal</EM>
 will return successive palettes in the order in which they are stored in the file, including those stored via the DFR8 interface. </P>
<P CLASS="Body">
<A NAME="50593879_pgfId-3232"></A>The parameters of <EM CLASS="FunctionName">
DFPgetpal</EM>
 are defined in the following table.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593879_pgfId-1383"></A><DIV>
<IMG SRC="UG_html-58.gif" ALT="">
</DIV>
<A NAME="50593879_53425"></A>DFPget<A NAME="50593879_marker-3830"></A>pal Parameter List</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3263"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593879_pgfId-4451"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3264"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3266"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3270"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3272"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3278"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3280"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593879_pgfId-3284"></A>DFPgetpal</H6>
<H6 CLASS="ReturnType">
<A NAME="50593879_pgfId-4452"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593879_pgfId-3285"></A>(dpapal)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="Table-Parameter">
<A NAME="50593879_pgfId-3287"></A>filename</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-3289"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-3291"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-3293"></A>Name of the HDF file.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="Table-Parameter">
<A NAME="50593879_pgfId-3297"></A>palette</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-3299"></A>VOIDP</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-3301"></A>&lt;valid numeric data type&gt;</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-3303"></A>768-byte buffer for the palette.</P>
</TD>
</TR>
</TABLE>
</DIV>
<DIV>
<H6 CLASS="Example">
<A NAME="50593879_pgfId-1385"></A><DIV>
<IMG SRC="UG_html-58.gif" ALT="">
</DIV>
Reading a Palette</H6>
<P CLASS="Body">
<A NAME="50593879_pgfId-1387"></A>The following examples demonstrate the method used to read a palette from the &quot;Example1.hdf&quot; HDF file created in Example 1.</P>
</DIV>
</DIV>
</DIV>
</DIV>
<DIV>
<H4 CLASS="Code-C-Title">
<A NAME="50593879_pgfId-1391"></A><DIV>
<IMG SRC="UG_html-60.gif" ALT="">
</DIV>
C:		</H4>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4301"></A>#include &quot;hdf.h&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4380"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4381"></A>main( )</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4382"></A>{</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4383"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4384"></A>	uint8 palette_data[768];</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4385"></A>	intn status;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4386"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4387"></A>	/* Read the palette data from a file. */</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4388"></A>	status = DFPgetpal(&quot;Example1.hdf&quot;, (VOIDP)palette_data);</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4389"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4390"></A>}</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4391"></A>&nbsp;</P>
</DIV>
<DIV>
<H4 CLASS="Code-F-Title">
<A NAME="50593879_pgfId-1411"></A><DIV>
<IMG SRC="UG_html-60.gif" ALT="">
</DIV>
FORTRAN:	</H4>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-1413"></A>	 PROGRAM READ PALETTE</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4393"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4394"></A>      integer dpgpal, status</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4395"></A>      character palette_data(768)</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4396"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4397"></A>C     Read the palette from the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4398"></A>      status = dpgpal(â€™Example1.hdfâ€™, palette_data)</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4399"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4400"></A>      end</P>
<P CLASS="ExampleCode">
<A NAME="50593879_pgfId-4401"></A>&nbsp;</P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593879_pgfId-1423"></A>	9.5.2	Reading<A NAME="50593879_marker-3831"></A> a Palette with a Given Reference Number: DFPreadref</H6>
<P CLASS="Body">
<A NAME="50593879_pgfId-2062"></A><EM CLASS="FunctionName">
DFPreadref</EM>
<A NAME="50593879_marker-3832"></A> is used to access specific palettes stored in files containing multiple palettes. It is the optionally called before <EM CLASS="FunctionName">
DFPgetpal</EM>
 to set the next palette to be accessed to be the specified palette. <EM CLASS="FunctionName">
DFPreadref</EM>
 can be used in connection with vgroups, which identify their members by tag/reference number pair. </P>
<P CLASS="Body">
<A NAME="50593879_pgfId-1427"></A>To access a specific palette, use the following calling sequence:</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-1429"></A><EM CLASS="syntaxLang">
C:</EM>
		true_false = DFPreadref(filename, ref);</P>
<P CLASS="syntax">
<A NAME="50593879_pgfId-1431"></A>		status = DFPgetpal(filename, palette);	</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-1433"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	true_false = dprref(filename, ref)</P>
<P CLASS="syntax">
<A NAME="50593879_pgfId-1435"></A>		status = dpgpal(filename, palette)</P>
<P CLASS="Body">
<A NAME="50593879_pgfId-2651"></A><EM CLASS="FunctionName">
DFPreadref</EM>
 specifies the reference number for the next read operation performed on the HDF file<EM CLASS="Funct-Call-Body">
 </EM>
<EM CLASS="VarName">
filename</EM>
<EM CLASS="Funct-Call-Body">
 to the reference number specified by </EM>
<EM CLASS="VarName">
ref</EM>
<EM CLASS="Funct-Call-Body">
.</EM>
</P>
<P CLASS="Body">
<A NAME="50593879_pgfId-17810"></A>Due to an oversight in the library, in very rare cases, a palette may not be seen by the DFP API, the application may need to use GR API to obtain it. Please refer to <A HREF="../../../hdf4doc_428/UsrGuide/src/UG_Appndx.htm#42142" CLASS="XRef">Issue of Missing Palettes</A> of this document for a detailed description of the issue and for help in determining which functions to use.</P>
<P CLASS="Body">
<A NAME="50593879_pgfId-3322"></A>The parameters of <EM CLASS="FunctionName">
DFPreadref</EM>
 are further defined in the following table.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593879_pgfId-2762"></A><DIV>
<IMG SRC="UG_html-58.gif" ALT="">
</DIV>
<A NAME="50593879_35587"></A>DFPre<A NAME="50593879_marker-3833"></A>adref Parameter List</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3689"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593879_pgfId-4457"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3690"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3692"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3694"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3698"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3704"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3706"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593879_pgfId-3710"></A>DFPreadref</H6>
<H6 CLASS="ReturnType">
<A NAME="50593879_pgfId-4458"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593879_pgfId-3711"></A>(dprref)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="Table-Parameter">
<A NAME="50593879_pgfId-3713"></A>filename</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-3715"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-3717"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-3719"></A>Name of the HDF file.</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="Table-Parameter">
<A NAME="50593879_pgfId-3723"></A>ref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-3725"></A>uint16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-3727"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-3729"></A>Reference number of the next palette to be read.</P>
</TD>
</TR>
</TABLE>
</DIV>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593879_pgfId-2096"></A>	9.5.3	Specifyin<A NAME="50593879_marker-3834"></A>g the Next Palette to be Accessed to be the First Palette: DFPrestart</H6>
<P CLASS="Body">
<A NAME="50593879_pgfId-2097"></A><EM CLASS="FunctionName">
DFPrestart</EM>
<A NAME="50593879_marker-3835"></A> causes the next <EM CLASS="FunctionName">
DFPgetpal</EM>
 to read from the first palette in the file, rather than the palette following the one that was most recently read. <EM CLASS="FunctionName">
DFPrestart</EM>
 has the following syntax:</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-2098"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFPrestart( );</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-2099"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = dprest( )<A NAME="50593879_marker-3828"></A></P>
</DIV>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593879_pgfId-2119"></A>	9.6	Other Palette Routines<DIV>
<IMG SRC="UG_html-57.gif" ALT="">
</DIV>
</H5>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593879_pgfId-2120"></A>	9.6.1	Que<A NAME="50593879_marker-3836"></A>rying the Number of Palettes in a File: DFPnpals</H6>
<P CLASS="Body">
<A NAME="50593879_pgfId-2121"></A><EM CLASS="FunctionName">
DFPnpals</EM>
<A NAME="50593879_marker-3837"></A> returns the total number palettes in a file and has the following syntax:</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-2122"></A><EM CLASS="syntaxLang">
C:</EM>
		num_of_pals = DFPnpals(filename);</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-2123"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	num_of_pals = dpnpals(filename)</P>
<P CLASS="Body">
<A NAME="50593879_pgfId-2173"></A>The parameter of DFPnpals is further defined in the following table.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593879_pgfId-2360"></A><DIV>
<IMG SRC="UG_html-58.gif" ALT="">
</DIV>
<A NAME="50593879_18142"></A>DFPn<A NAME="50593879_marker-3838"></A>pals Parameter List</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3454"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593879_pgfId-4461"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3455"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3457"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3459"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3463"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3469"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593879_pgfId-3471"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593879_pgfId-3475"></A>DFPnpals</H6>
<H6 CLASS="ReturnType">
<A NAME="50593879_pgfId-4462"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593879_pgfId-3476"></A>(dpnpals)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="Table-Parameter">
<A NAME="50593879_pgfId-3478"></A>filename</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-3480"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593879_pgfId-3482"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593879_pgfId-3484"></A>Name of the HDF file.</P>
</TD>
</TR>
</TABLE>
</DIV>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593879_pgfId-2304"></A>	9.6.2	Obtaining the R<A NAME="50593879_marker-3841"></A>eference Number of the Most Recently Accessed Palette: DFPlastref</H6>
<P CLASS="Body">
<A NAME="50593879_pgfId-1055"></A><EM CLASS="FunctionName">
DFPlastref</EM>
<A NAME="50593879_marker-3842"></A> returns the reference number most recently used in writing or reading a palette. This routine is used for attaching annotations to palettes and adding palettes to vgroups.</P>
<P CLASS="Body">
<A NAME="50593879_pgfId-1056"></A>The following calling sequence uses <EM CLASS="FunctionName">
DFPlastref</EM>
 to find the reference number of the palette most recently written to an HDF file:</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-2176"></A><EM CLASS="syntaxLang">
C:</EM>
		status = DFPaddpal(filename, palette, width, height, compress);</P>
<P CLASS="syntax">
<A NAME="50593879_pgfId-2177"></A>		lastref = DFPlastref( );</P>
<P CLASS="FM1-syntax">
<A NAME="50593879_pgfId-2178"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = dpapal(filename, palette, width, height, compress)</P>
<P CLASS="syntax">
<A NAME="50593879_pgfId-2179"></A>		lastref = dplref( )</P>
<P CLASS="Body">
<A NAME="50593879_pgfId-2817"></A><EM CLASS="FunctionName">
DFPputpal</EM>
 or <EM CLASS="FunctionName">
DFPgetpal</EM>
 can be used in place of <EM CLASS="FunctionName">
DFPaddpal</EM>
 with similar results. </P>
</DIV>
</DIV>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593879_pgfId-2181"></A>	9.7	Back<A NAME="50593879_marker-3843"></A>ward Compatibility Issues<DIV>
<IMG SRC="UG_html-57.gif" ALT="">
</DIV>
</H5>
<P CLASS="Body">
<A NAME="50593879_pgfId-2182"></A>As HDF has evolved, a variety of internal structures have been used to store palettes, with different tags used to represent them. To maintain backward compatibility with older versions of HDF, the palette interface supported by HDF version 4.0 recognizes palettes stored using all previously-used HDF tags. A detailed description of the tags and structures used to store palettes is in the <EM CLASS="TextItalic">
HDF Specifications and Developerâ€™s Guide v3.2</EM>
 which can be found from the HDF web site at <EM CLASS="URL">
http://www.hdfgroup.org/</EM>
.<A NAME="50593879_marker-3809"></A></P>
<P CLASS="Body">
<A NAME="50593880_pgfId-89737"></A>&nbsp;</P>
</DIV>
</DIV>
<HR><P><table id="Botofpage" border="0" width="850" cellspacing="0" cellpadding="0">      <tr>        <td align="left">        HDF 4.2.10 - February 2014<br/>        <a href="THG_Copyright.html">Copyright</a>        <td align="right">          <span style="font-size: 12px; font-weight: bold">            The HDF Group<br />          </span>          <span style="font-size: 12px">            <a href="http://www.hdfgroup.org">www.hdfgroup.org</a><br />            <img valign="bottom" border="0" src="images/help.jpg" height="12" alt="The HDF Group" valign="top" />          </span>        </td>      </tr>    </table></BODY>
</HTML>
