<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 11.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="UG_html.css" CHARSET="UTF-8" TYPE="text/css">
<table id="Topofpage" border="0" width="850" cellspacing="0" cellpadding="0"><tr><td align="left"><a href="http://www.hdfgroup.org"><img id="THG_logo" border="0" src="images/hdf_logo.jpg" width="90" height="70" alt="The HDF Group" valign="top" /></a></td><td valign="middle" align="center"><H1>HDF User’s Guide</H1><span style="font-size: 14px; font-weight: bold"><b>4.2.12</b></td><td valign="middle" align="center"><a HREF=UG_html.htm> [Top]</a> <a HREF=UG_html-9.htm> [Prev]</a><a HREF=UG_html-11.htm> [Next]</a></td></tr></table><HR></HEAD>
<BODY>
<DIV>
<span style="font-size: 14px; font-weight: bold"><a href="UG_html-17.htm">Index</a>] [<a href="UG_html-20.htm">List of Examples</a>] [<a href="UG_html-19.htm">List of Tables</a>] [<a href="UG_html-18.htm">List of Figures</a>]</DIV>
<H1 CLASS="ChapterTitle">
<A NAME="50593880_pgfId-89740"></A>Chapter 10 --	<A NAME="50593880_marker-89738"></A><A NAME="50593880_10210"></A>Annotations (AN API)</H1>
<DIV>
<H4 CLASS="Heading1">
<A NAME="50593880_pgfId-89710"></A>	10.1	Chapter Overview<DIV>
<IMG SRC="UG_html-61.gif" ALT="">
</DIV>
</H4>
<P CLASS="Body">
<A NAME="50593880_pgfId-3553"></A>The HDF <A NAME="50593880_marker-3551"></A>annotation interface, the AN interface, supports the storage of labels and descriptions to HDF files and the data objects they contain. This chapter explains the methods used to read and write file and data object annotations using the AN interface. </P>
<P CLASS="Body">
<A NAME="50593880_pgfId-21315"></A>Note that the AN interface works with multiple files and supersedes the single-file annotations interface, the DFAN interface, described in <A HREF="UG_html-11.htm#50593881_17375" CLASS="XRef">Single-file Annotations (DFAN API)</A>.  Further note that the AN interface can also read files written by DFAN interface routines.</P>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593880_pgfId-3555"></A>	10.2	The Annotation Data Model<DIV>
<IMG SRC="UG_html-61.gif" ALT="">
</DIV>
</H5>
<P CLASS="Body">
<A NAME="50593880_pgfId-26471"></A>When w<A NAME="50593880_marker-26469"></A>orkin<A NAME="50593880_marker-26470"></A>g with different data types, it is often convenient to identify the contents of a file by adding a short text description or <A NAME="50593880_marker-26472"></A><EM CLASS="Definition">
annotation</EM>
. An annotation serves as the explanation for a file or data object, as in &quot;<EM CLASS="DefName">
COLLECTED 12/14/90</EM>
&quot; or &quot;<EM CLASS="DefName">
BLACK HOLE SIMULATION</EM>
&quot;. The annotation can be as short as a name or as long as a portion of source code. For example, if the data originated as satellite data, the annotation might include the source of the data, pertinent environmental conditions, or other relevant information. In the case of a hypothetical black hole simulation, the annotation might contain source code for the program that produced the data. </P>
<P CLASS="Body">
<A NAME="50593880_pgfId-3561"></A>HDF annotations are designed to accommodate a wide variety of information including titles, comments, variable names, parameters, formulas, and source code. In fact, HDF annotations can encompass any textual information regarding the collection, meaning, or intended use of the data.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-19493"></A>Annotations can be attached to files or data objects, and are themselves data objects identifiable by a tag/reference number pair. Refer to <A HREF="UG_html-2.htm#50593872_13138" CLASS="XRef">HDF Fundamentals</A>, for a description of tag/reference number pairs.</P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-3563"></A>	10.2.1 Labels and Descriptions</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-3565"></A>Annotations come in two forms: <EM CLASS="Definition">
labels</EM>
 and <EM CLASS="Definition">
descriptions</EM>
. <EM CLASS="Definition">
Labels</EM>
<A NAME="50593880_marker-12179"></A> are short annotations used for assigning things like titles or time stamps to a file or its data objects. Longer annotations are called <EM CLASS="Definition">
descriptions</EM>
 and typically contain more extensive information, such as a source code module or mathematical formulae.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-3567"></A>Labels are defined as a null-terminated string of characters. Des<A NAME="50593880_marker-12180"></A>criptions may contain any sequence of ASCII characters.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-19484"></A>In addition to the distinction made between labels and descriptions, HDF distinguishes between <EM CLASS="Definition">
file annotations</EM>
 and <EM CLASS="Definition">
object annotations</EM>
. </P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-3571"></A>	10.2.2 File Annotations</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-3066"></A>File an<A NAME="50593880_marker-12181"></A>notations are assigned to a file to describe the origin, meaning, or intended use of its data. Any HDF file can be annotated with a label, description, or combination of both. <A HREF="UG_html-10.htm#50593880_37134" CLASS="XRef">(See Figure 10a)</A> The number of labels or descriptions an HDF file may contain is limited to the maximum number of tag/reference number pairs. File annotations may be assigned in any order and at any time after a file is created.</P>
<DIV>
<H6 CLASS="Figure">
<A NAME="50593880_pgfId-3176"></A><DIV>
<IMG SRC="UG_html-62.gif" ALT="">
</DIV>
FIGURE 10a	<A NAME="50593880_37134"></A>Fil<A NAME="50593880_marker-12183"></A>e and Ob<A NAME="50593880_marker-12182"></A>ject Annotations</H6>
<DIV>
<MAP NAME="UG_html-63">
</MAP>
<IMG SRC="UG_html-63.gif" USEMAP="#UG_html-63" ALT="">
</DIV>
<P CLASS="Body">
<A NAME="50593880_pgfId-3177"></A>Although it is possible to use a file annotation to describe a data object in a file, this practice is not recommended. Each data object should be described by its own data object annotation as it is added to the file. </P>
</DIV>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-3639"></A>	10.2.3 Object Annotations </H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-3641"></A>Ob<A NAME="50593880_marker-12184"></A>ject annotations are assigned to individual data objects to explain their origin, meaning, or intended use. Because object annotations are assigned to individual objects, their use requires an understanding of HDF tags and reference numbers (see <A HREF="UG_html-2.htm#50593872_13138" CLASS="XRef">HDF Fundamentals</A>).</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-11981"></A>The annotation interface takes advantage of this identification scheme by including the object’s tag/reference number pair with the text of the annotation. Consider a scientific data set identified by the tag <EM CLASS="DefName">
DFTAG_NDG</EM>
 and the reference number <EM CLASS="DefName">
10</EM>
. <A HREF="UG_html-10.htm#50593880_89021" CLASS="XRef">(See Figure 10b)</A> All object annotations assigned to this particular data set must be prefaced with the tag <EM CLASS="DefName">
DFTAG_NDG</EM>
 followed by the reference number <EM CLASS="DefName">
10</EM>
.</P>
<DIV>
<H6 CLASS="Figure">
<A NAME="50593880_pgfId-3658"></A><DIV>
<IMG SRC="UG_html-62.gif" ALT="">
</DIV>
FIGURE 10b	<A NAME="50593880_89021"></A>Object Annotations with Tag/Reference Number Pairs</H6>
<DIV>
<MAP NAME="UG_html-64">
</MAP>
<IMG SRC="UG_html-64.gif" USEMAP="#UG_html-64" ALT="">
</DIV>
</DIV>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-44432"></A>	10.2.4 Terminology </H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-44433"></A>The following pairs of terms are used interchangeably in the following discussions: <EM CLASS="Definition">
data object annotation</EM>
 and <EM CLASS="Definition">
data annotation</EM>
; <EM CLASS="Definition">
data object label</EM>
 and <EM CLASS="Definition">
data label</EM>
; <EM CLASS="Definition">
data object description</EM>
 and <EM CLASS="Definition">
data description</EM>
.</P>
</DIV>
</DIV>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593880_pgfId-5192"></A>	10.3	<A NAME="50593880_26197"></A>The <A NAME="50593880_marker-12193"></A><A NAME="50593880_marker-12194"></A>AN interface<DIV>
<IMG SRC="UG_html-61.gif" ALT="">
</DIV>
</H5>
<P CLASS="Body">
<A NAME="50593880_pgfId-5349"></A>Th<A NAME="50593880_marker-22004"></A>e AN interface permits concurrent operations on a set of annotations that exist in more than one file rather than requiring the program to deal with the annotations on a file-by-file basis.</P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-19559"></A>	10.3.1 AN Library Routines</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-19561"></A>The C routine names of the AN interface are prefaced by the string &quot;AN&quot; and the FORTRAN-77 routine names are prefaced by &quot;af&quot;. These routines <A NAME="50593880_marker-19560"></A>are divided into the following categories:</P>
<UL>
<LI CLASS="Bullet">
<A NAME="50593880_pgfId-19562"></A><EM CLASS="Definition">
Access routines</EM>
 initialize and terminate access to the AN interface and the annotation. </LI>
<LI CLASS="Bullet">
<A NAME="50593880_pgfId-5400"></A><EM CLASS="Definition">
Read/write routines</EM>
 read and write file or object annotations.</LI>
<LI CLASS="Bullet">
<A NAME="50593880_pgfId-12976"></A><EM CLASS="Definition">
General inquiry routines</EM>
 return information about the annotations.</LI>
</UL>
<P CLASS="Body">
<A NAME="50593880_pgfId-5592"></A>The AN routines are listed in <A HREF="UG_html-10.htm#50593880_41621" CLASS="XRef">Table 10A</A> and are described in more detail in subsequent sections of this chapter.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593880_pgfId-5700"></A><DIV>
<IMG SRC="UG_html-62.gif" ALT="">
</DIV>
AN Libr<A NAME="50593880_marker-12262"></A>ary Routines<A NAME="50593880_41621"></A></H6>
<TABLE>
<TR>
<TH ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-19171"></A>Category</P>
</TH>
<TH ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-19173"></A>Routine Names</P>
</TH>
<TH ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-19177"></A>Description</P>
</TH>
</TR>
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-19181"></A>C</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-19183"></A>FORTRAN-77</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="6" COLSPAN="1">
<P CLASS="TableCategory">
<A NAME="50593880_pgfId-19187"></A>Access</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19189"></A>ANstart</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19191"></A>afstart</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19193"></A>Initializes the AN interface (<A HREF="UG_html-10.htm#50593880_31751" CLASS="XRef">Accessing Files and Annotations: ANstart, ANcreatef, and ANcreate</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19197"></A>ANcreate</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19199"></A>afcreate</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19201"></A>Creates a new data annotation (<A HREF="UG_html-10.htm#50593880_31751" CLASS="XRef">Accessing Files and Annotations: ANstart, ANcreatef, and ANcreate</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19205"></A>ANcreatef</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19207"></A>affcreate</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19209"></A>Creates a new file annotation (<A HREF="UG_html-10.htm#50593880_31751" CLASS="XRef">Accessing Files and Annotations: ANstart, ANcreatef, and ANcreate</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19213"></A>ANselect</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19215"></A>afselect</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19217"></A>Obtains an existing annotation (<A HREF="UG_html-10.htm#50593880_30818" CLASS="XRef">Selecting an Annotation: ANselect</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19221"></A>ANendaccess</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19223"></A>afendaccess</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19225"></A>Terminates access to an annotation (<A HREF="UG_html-10.htm#50593880_31751" CLASS="XRef">Accessing Files and Annotations: ANstart, ANcreatef, and ANcreate</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19229"></A>ANend</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19231"></A>afend</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19676"></A>Terminates access to AN interface (<A HREF="UG_html-10.htm#50593880_31751" CLASS="XRef">Accessing Files and Annotations: ANstart, ANcreatef, and ANcreate</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableCategory">
<A NAME="50593880_pgfId-19235"></A>Read/write</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19237"></A>ANreadann</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19239"></A>afreadeann</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19241"></A>Reads an annotation (<A HREF="UG_html-10.htm#50593880_28912" CLASS="XRef">Reading an Annotation: ANreadann</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19245"></A>ANwriteann</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19247"></A>afwriteann</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19249"></A>Writes an annotation (<A HREF="UG_html-10.htm#50593880_29304" CLASS="XRef">Writing an Annotation: ANwriteann</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="9" COLSPAN="1">
<P CLASS="TableCategory">
<A NAME="50593880_pgfId-19353"></A>General Inquiry</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19269"></A>ANannlen</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19271"></A>afannlen</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19273"></A>Returns the length of an annotation (<A HREF="UG_html-10.htm#50593880_34049" CLASS="XRef">Getting the Length of an Annotation: ANannlen</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19347"></A>ANannlist</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19349"></A>afannlist</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19351"></A>Retrieves the annotation identifiers of an object (<A HREF="UG_html-10.htm#50593880_21683" CLASS="XRef">Obtaining the List of Specifically-typed Annotation Identifiers of a Data Object: ANannlist</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19357"></A>ANatype2tag</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19359"></A>afatypetag</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19361"></A>Returns the annotation tag corresponding to an annotation type (<A HREF="UG_html-10.htm#50593880_13394" CLASS="XRef">Obtaining an Annotation Tag from a Specified Annotation Type: ANatype2tag</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19277"></A>ANfileinfo</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19279"></A>affileinfo</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19281"></A>Retrieves the number of annotations of each type in a file (<A HREF="UG_html-10.htm#50593880_34412" CLASS="XRef">Obtaining the Number of Annotations: ANfileinfo</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19387"></A>ANnumann</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19389"></A>afnumann</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19391"></A>Returns the number of annotations of the given type attached to an object (<A HREF="UG_html-10.htm#50593880_12781" CLASS="XRef">Obtaining the Number of Specifically-typed Annotations of a Data Object: ANnumann</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19285"></A>ANget_tagref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19287"></A>afgettagref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19289"></A>Retrieves the tag/reference number pair of an annotation specified by its index (<A HREF="UG_html-10.htm#50593880_16226" CLASS="XRef">Obtaining the Tag/Reference Number Pair of the Specified Annotation Index and Type: ANget_tagref</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19293"></A>ANid2tagref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19295"></A>afidtagref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19297"></A>Retrieves the tag/reference number pair of an annotation specified by its identifier (<A HREF="UG_html-10.htm#50593880_37570" CLASS="XRef">Obtaining the Tag/Reference Number Pair from a Specified Annotation Identifier: ANid2tagref</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19317"></A>ANtag2atype</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19319"></A>aftagatype</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19321"></A>Returns the annotation type corresponding to an annotation tag (<A HREF="UG_html-10.htm#50593880_41152" CLASS="XRef">Obtaining an Annotation Type from a Specified Object Tag: ANtag2atype</A>)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19373"></A>ANtagref2id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellFunction">
<A NAME="50593880_pgfId-19375"></A>aftagrefid</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-19377"></A>Returns the identifier of an annotation given its tag/reference number pair (<A HREF="UG_html-10.htm#50593880_20817" CLASS="XRef">Obtaining the Annotation Identifier from a Specified Tag/Reference Number Pair: ANtagref2id</A>)</P>
</TD>
</TR>
</TABLE>
</DIV>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-5706"></A>	10.3.2 <A NAME="50593880_10193"></A>Type and Tag Defi<A NAME="50593880_marker-12263"></A>nitions Used in the AN Interface</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-5710"></A>The AN interface uses the four general annotation types used in HDF: the data label, the data description, the file label and the file description. These annotation types correspondingly map to the <EM CLASS="DefName">
AN_DATA_LABEL</EM>
 (or <EM CLASS="DefName">
0</EM>
), the <EM CLASS="DefName">
AN_DATA_DESC</EM>
 (or <EM CLASS="DefName">
1</EM>
), the <EM CLASS="DefName">
AN_FILE_LABEL</EM>
 (or <EM CLASS="DefName">
2</EM>
) and the <EM CLASS="DefName">
AN_FILE_DESC</EM>
 (or <EM CLASS="DefName">
3</EM>
) definitions. Several routines in the AN interface require one of these type definitions to be passed in as an argument to designate the kind of annotation to be created or accessed.</P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-5713"></A>	10.3.3 Prog<A NAME="50593880_marker-12264"></A>ramming Model for the AN Interface</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-6718"></A>As with the GR and SD interfaces, the programming model for the AN interface allows several files to be open concurrently.  The contents of these files can be operated on simultaneously as long as the calling program accurately keeps track of each interface.  The file and object identifiers returned by the interface. Each object identifier and file identifier must be explicitly disposed of before the termination of the calling program.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-22058"></A>The AN interface writes file labels, file descriptions, data object labels, and data object descriptions according to the following programming model:</P>
<DIV>
<H6 CLASS="FM1Step">
<A NAME="50593880_pgfId-22060"></A>Open the HDF file.</H6>
<OL>
<LI CLASS="Step">
<A NAME="50593880_pgfId-7006"></A>2.	Initialize the AN interface.</LI>
<LI CLASS="Step">
<A NAME="50593880_pgfId-7007"></A>3.	Create a file annotation or a data annotation.</LI>
<LI CLASS="Step">
<A NAME="50593880_pgfId-22067"></A>4.	Perform the desired operations on the annotation.</LI>
<LI CLASS="Step">
<A NAME="50593880_pgfId-7008"></A>5.	Terminate access to the annotation.</LI>
<LI CLASS="Step">
<A NAME="50593880_pgfId-7010"></A>6.	Terminate access to the AN interface.</LI>
<LI CLASS="Step">
<A NAME="50593880_pgfId-43707"></A>7.	Close the HDF file.</LI>
</OL>
<P CLASS="Body">
<A NAME="50593880_pgfId-45407"></A>To create a file or object annotation, the calling program must contain the following AN routine calls:</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-45408"></A><EM CLASS="syntaxLang">
C:</EM>
		file_id = Hopen(filename, file_access_mode, num_dds_block);</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-45409"></A>		an_id = ANstart(file_id);</P>
<P CLASS="syntax-or-top">
<A NAME="50593880_pgfId-7024"></A>		ann_id = ANcreatef(an_id, annot_type);</P>
<P CLASS="syntax-or-bot">
<A NAME="50593880_pgfId-19866"></A>	<EM CLASS="syntaxLang">
OR</EM>
	ann_id = ANcreate(an_id, obj_tag, obj_ref, annot_type);</P>
<P CLASS="syntax-or-bot">
<A NAME="50593880_pgfId-22457"></A>		&lt;Optional operations&gt;</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-7026"></A>		status = ANendaccess(ann_id);</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-7027"></A>		status = ANend(an_id);</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-7028"></A>		status = Hclose(file_id);</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-7029"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	file_id = hopen(filename, file_access_mode, num_dds_block)</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-7030"></A>		an_id = afstart(file_id)</P>
<P CLASS="syntax-or-top">
<A NAME="50593880_pgfId-19881"></A>		ann_id = affcreate(an_id, annot_type)</P>
<P CLASS="syntax-or-bot">
<A NAME="50593880_pgfId-7031"></A>	<EM CLASS="syntaxLang">
OR</EM>
	ann_id = afcreate(an_id, obj_tag, obj_ref, annot_type)</P>
<P CLASS="syntax-or-bot">
<A NAME="50593880_pgfId-22459"></A>		&lt;Optional operations&gt;</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-7033"></A>		status = afendaccess(ann_id)</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-7034"></A>		status = afend(an_id)</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-7378"></A>		status = hclose(file_id)</P>
</DIV>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-23134"></A>	10.3.4 <A NAME="50593880_31751"></A>Accessing Files and Annotations:<A NAME="50593880_marker-45233"></A> ANstart, ANcreatef, and ANcreate</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-23136"></A>An HDF file must be opened by <EM CLASS="FunctionName">
Hopen</EM>
 before it can be accessed using the AN interface. <EM CLASS="FunctionName">
Hopen</EM>
 is described in <A HREF="UG_html-2.htm#50593872_13138" CLASS="XRef">HDF Fundamentals</A>.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-22026"></A><EM CLASS="FunctionName">
ANstart</EM>
<A NAME="50593880_marker-12269"></A> initializes the AN interface for subsequent AN interface operations. <EM CLASS="FunctionName">
ANstart</EM>
 takes one argument, the file identifier, <EM CLASS="VarName">
file_id</EM>
, returned by <EM CLASS="FunctionName">
Hopen</EM>
, and returns an AN interface identifier, <EM CLASS="VarName">
an_id</EM>
 or <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
) upon unsuccessful completion.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-7111"></A><EM CLASS="FunctionName">
ANcreatef</EM>
<A NAME="50593880_marker-12267"></A> creates a file label or file description. It takes two parameters: the AN interface identifier, <EM CLASS="VarName">
an_id</EM>
, returned by <EM CLASS="FunctionName">
ANstart</EM>
, and the type of the file annotation to be created, <EM CLASS="VarName">
annot_type</EM>
. The parameter <EM CLASS="VarName">
annot_type</EM>
 must be set to either <EM CLASS="DefName">
AN_FILE_LABEL</EM>
 (or <EM CLASS="DefName">
2</EM>
) or <EM CLASS="DefName">
AN_FILE_DESC</EM>
 (or <EM CLASS="DefName">
3</EM>
). <EM CLASS="FunctionName">
ANcreatef</EM>
 returns the file annotation identifier (<EM CLASS="VarName">
ann_id</EM>
) if successful, and <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
) otherwise.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-22148"></A><EM CLASS="FunctionName">
ANcreate</EM>
<A NAME="50593880_marker-22147"></A> creates a data label or data description. It takes four parameters: <EM CLASS="VarName">
an_id</EM>
, <EM CLASS="VarName">
obj_tag</EM>
, <EM CLASS="VarName">
obj_ref</EM>
, and <EM CLASS="VarName">
annot_type</EM>
. The parameter <EM CLASS="VarName">
an_id</EM>
 is the AN interface identifier, returned by <EM CLASS="FunctionName">
ANstart</EM>
. The parameters <EM CLASS="VarName">
obj_tag</EM>
 and <EM CLASS="VarName">
obj_ref</EM>
 are the tag/reference number pair of the object the annotation will be assigned to. The parameter <EM CLASS="VarName">
annot_type</EM>
 specifies the type of the data annotation. It must be set to either <EM CLASS="DefName">
AN_DATA_LABEL</EM>
 (or <EM CLASS="DefName">
0</EM>
) or <EM CLASS="DefName">
AN_DATA_DESC</EM>
 (or <EM CLASS="DefName">
1</EM>
). The annotation type definitions are defined in the header file &quot;hdf.h&quot;. </P>
<P CLASS="Body">
<A NAME="50593880_pgfId-44357"></A><EM CLASS="FunctionName">
ANcreate</EM>
 returns the data annotation identifier (<EM CLASS="VarName">
ann_id</EM>
) if successful and <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
) otherwise. The parameters of <EM CLASS="FunctionName">
ANcreate</EM>
, <EM CLASS="FunctionName">
ANcreatef</EM>
, and <EM CLASS="FunctionName">
ANstart</EM>
 are further defined in <A HREF="UG_html-10.htm#50593880_20655" CLASS="XRef">Table 10B</A>.</P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-22470"></A>	10.3.5 Terminating Access to Annotations and Files: ANendaccess and ANend</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-22142"></A><EM CLASS="FunctionName">
ANendaccess</EM>
 terminates access to the annotation identified by the parameter <EM CLASS="VarName">
ann_id</EM>
, which is returned by <EM CLASS="FunctionName">
ANcreate</EM>
 or <EM CLASS="FunctionName">
ANcreatef</EM>
. Any subsequent attempts to access this annotation identifier will result in a value of <EM CLASS="DefName">
FAIL</EM>
 being returned. One <EM CLASS="FunctionName">
ANendaccess</EM>
 must be called for every <EM CLASS="FunctionName">
ANcreate</EM>
, <EM CLASS="FunctionName">
ANcreatef</EM>
, or <EM CLASS="FunctionName">
ANattach</EM>
. Each <EM CLASS="FunctionName">
ANendaccess</EM>
 returns either <EM CLASS="DefName">
SUCCEED</EM>
 (or <EM CLASS="DefName">
0</EM>
) or <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
).</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-24149"></A><EM CLASS="FunctionName">
ANend</EM>
 terminates access to the AN interface identified by the parameter <EM CLASS="VarName">
an_id</EM>
, which is returned by <EM CLASS="FunctionName">
ANstart</EM>
. Any subsequent attempts to access the AN interface identifier or to use AN routines will result in a value of <EM CLASS="DefName">
FAIL</EM>
 being returned. </P>
<P CLASS="Body">
<A NAME="50593880_pgfId-44369"></A><EM CLASS="FunctionName">
ANend</EM>
 returns either <EM CLASS="DefName">
SUCCEED</EM>
 (or <EM CLASS="DefName">
0</EM>
) or <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
).  The parameters of <EM CLASS="FunctionName">
ANendaccess</EM>
 and <EM CLASS="FunctionName">
ANend</EM>
 are defined in <A HREF="UG_html-10.htm#50593880_20655" CLASS="XRef">Table 10B</A>.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-24288"></A>The HDF file must be closed by <EM CLASS="FunctionName">
Hclose</EM>
 after all calls to <EM CLASS="FunctionName">
ANend</EM>
 have been properly made. <EM CLASS="FunctionName">
Hclose</EM>
 is described in <A HREF="UG_html-2.htm#50593872_13138" CLASS="XRef">HDF Fundamentals</A>.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593880_pgfId-24283"></A><DIV>
<IMG SRC="UG_html-62.gif" ALT="">
</DIV>
ANst<A NAME="50593880_marker-24154"></A>art, ANcre<A NAME="50593880_marker-24155"></A>ate, AN<A NAME="50593880_marker-24156"></A>createf, ANe<A NAME="50593880_marker-24157"></A>ndaccess an<A NAME="50593880_marker-24158"></A>d ANend Parameter Lists<A NAME="50593880_20655"></A></H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-24162"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-24163"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593880_pgfId-24164"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-24166"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-24168"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-24172"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-24178"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-24180"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-24184"></A>ANstart</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-24185"></A>[int32]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-24186"></A>(afstart)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24188"></A>file_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24190"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24192"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-24194"></A>File identifier</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="4" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-24196"></A>ANcreate</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-24197"></A>[int32]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-24198"></A>(afcreate)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24200"></A>an_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24202"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24204"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-24206"></A>AN interface identifier</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24210"></A>obj_tag</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24212"></A>uint16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24214"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-24216"></A>Tag of the object to be annotated</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24220"></A>obj_ref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24222"></A>uint16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24224"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-24226"></A>Reference number of the object to be annotated</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24230"></A>annot_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24232"></A>ann_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24234"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-24236"></A>Data annotation type</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-24238"></A>ANcreatef</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-24239"></A>[int32]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-24240"></A>(affcreate)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24242"></A>an_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24244"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24246"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-24248"></A>AN interface identifier</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24252"></A>annot_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24254"></A>ann_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24256"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-24258"></A>File annotation type</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-24260"></A>ANendaccess</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-24261"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-24262"></A>(afendaccess)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24264"></A>ann_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24266"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24268"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-24270"></A>Annotation identifier</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-24272"></A>ANend</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-24273"></A>[int32]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-24274"></A>(afend)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24276"></A>an_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24278"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-24280"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-24282"></A>AN interface identifier</P>
</TD>
</TR>
</TABLE>
</DIV>
</DIV>
</DIV>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593880_pgfId-5723"></A>	10.4	<A NAME="50593880_29304"></A>Wr<A NAME="50593880_marker-12277"></A>iting an Annotation: ANwriteann<DIV>
<IMG SRC="UG_html-61.gif" ALT="">
</DIV>
</H5>
<P CLASS="Body">
<A NAME="50593880_pgfId-24859"></A>The AN programming model for writing an annotation is as follows:</P>
<DIV>
<H6 CLASS="FM1Step">
<A NAME="50593880_pgfId-24860"></A>Create a file annotation or a data annotation.</H6>
<OL>
<LI CLASS="Step">
<A NAME="50593880_pgfId-24861"></A>2.	Write to the annotation.</LI>
<LI CLASS="Step">
<A NAME="50593880_pgfId-24862"></A>3.	Terminate access to the annotation.</LI>
</OL>
<P CLASS="Body">
<A NAME="50593880_pgfId-5728"></A>To write a file or data annotation, the calling program must contain the following routine calls:</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-5729"></A><EM CLASS="syntaxLang">
C:</EM>
		file_id = Hopen(filename, file_access_mode, num_dds_block);</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-6758"></A>		an_id = ANstart(file_id);</P>
<P CLASS="syntax-or-top">
<A NAME="50593880_pgfId-19977"></A>		ann_id = ANcreatef(an_id, annot_type);</P>
<P CLASS="syntax-or-bot">
<A NAME="50593880_pgfId-6759"></A>	<EM CLASS="syntaxLang">
OR</EM>
	ann_id = ANcreate(an_id, obj_tag, obj_ref, annot_type);</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-5730"></A>		status = ANwriteann(ann_id, ann_text, ann_length);</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-6773"></A>		status = ANendaccess(ann_id);</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-6774"></A>		status = ANend(an_id);</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-5731"></A>		status = Hclose(file_id);</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-6793"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	file_id = hopen(filename, file_access_mode, num_dds_block)</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-6794"></A>		an_id = afstart(file_id)</P>
<P CLASS="syntax-or-top">
<A NAME="50593880_pgfId-19985"></A>		ann_id = affcreate(an_id, annot_type)</P>
<P CLASS="syntax-or-bot">
<A NAME="50593880_pgfId-6797"></A>	<EM CLASS="syntaxLang">
OR</EM>
	ann_id = afcreate(an_id, obj_tag, obj_ref, annot_type)</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-6800"></A>		status = afwriteann(ann_id, ann_text, ann_length)</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-6803"></A>		status = afendaccess(ann_id)</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-5733"></A>		status = afend(an_id)</P>
<P CLASS="syntax">
<A NAME="50593880_pgfId-5734"></A>		status = hclose(file_id)</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-23353"></A><EM CLASS="FunctionName">
ANwriteann</EM>
<A NAME="50593880_marker-23352"></A> writes the annotation text given in the parameter <EM CLASS="VarName">
ann_text</EM>
 to the annotation specified by <EM CLASS="VarName">
ann_id</EM>
. The parameter <EM CLASS="VarName">
ann_length</EM>
 specifies the number of characters in the annotation text, not including the <EM CLASS="DefName">
NULL</EM>
 character. If the annotation has already been written with text, <EM CLASS="FunctionName">
ANwriteann</EM>
 will overwrite the current text.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-23354"></A><EM CLASS="FunctionName">
ANwriteann</EM>
 returns either <EM CLASS="DefName">
SUCCEED</EM>
 (or <EM CLASS="DefName">
0</EM>
) or <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
). The parameters of <EM CLASS="FunctionName">
ANwriteann</EM>
 are further defined in <A HREF="UG_html-10.htm#50593880_40836" CLASS="XRef">Table 10C</A>.</P>
</DIV>
<DIV>
<H6 CLASS="Table">
<A NAME="50593880_pgfId-23343"></A><DIV>
<IMG SRC="UG_html-62.gif" ALT="">
</DIV>
<A NAME="50593880_40836"></A>ANwr<A NAME="50593880_marker-23287"></A>iteann Parameter List</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-23290"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-23291"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593880_pgfId-23292"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-23294"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-23296"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-23300"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-23306"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-23308"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="3" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-23312"></A>ANwriteann</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-23313"></A>[int32]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-23314"></A>(afwriteann)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-23316"></A>ann_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-23318"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-23320"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-23322"></A>Annotation identifier</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-23326"></A>ann_text</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-23328"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-23330"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-23332"></A>Text of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-23336"></A>ann_length</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-23338"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-23340"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-23342"></A>Number of characters in the annotation</P>
</TD>
</TR>
</TABLE>
</DIV>
<DIV>
<H6 CLASS="Example">
<A NAME="50593880_pgfId-23344"></A><DIV>
<IMG SRC="UG_html-62.gif" ALT="">
</DIV>
Creating File and Data Annotations</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-44479"></A>This example illustrates the use of <EM CLASS="FunctionName">
ANcreatef/affcreate</EM>
 to create file annotations and <EM CLASS="FunctionName">
ANcreate/afcreate</EM>
 to create data annotations.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-44482"></A>In this example, the program creates an HDF file named &quot;General_HDFobjects.hdf&quot; then attaches to it two annotations, a file label and a file description.  Within the HDF file, the program creates a vgroup named &quot;AN Vgroup&quot; and attaches to it two annotations, a data label and a data description.  Refer to <A HREF="UG_html-5.htm#50593875_34180" CLASS="XRef">Vgroups (V API)</A>, for a discussion of the V interface routines used in this example.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-44489"></A>Note that the names <EM CLASS="DefName">
AN_FILE_LABEL</EM>
, <EM CLASS="DefName">
AN_FILE_DESC</EM>
, <EM CLASS="DefName">
AN_DATA_LABEL</EM>
, and <EM CLASS="DefName">
AN_DATA_DESC</EM>
 are defined by the library to specify the type of the annotation to be accessed.</P>
</DIV>
</DIV>
</DIV>
<DIV>
<H4 CLASS="Code-C-Title">
<A NAME="50593880_pgfId-46565"></A><DIV>
<IMG SRC="UG_html-65.gif" ALT="">
</DIV>
C:		</H4>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45700"></A>#include &quot;hdf.h&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45701"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45702"></A>#define  FILE_NAME      &quot;General_HDFobjects.hdf&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45703"></A>#define  VG_NAME        &quot;AN Vgroup&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45704"></A>#define  FILE_LABEL_TXT &quot;General HDF objects&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45705"></A>#define  FILE_DESC_TXT  &quot;This is an HDF file that contains general HDF objects&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45706"></A>#define  DATA_LABEL_TXT &quot;Common AN Vgroup&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45707"></A>#define  DATA_DESC_TXT  &quot;This is a vgroup that is used to test data annotations&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45708"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45709"></A>main( )</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45710"></A>{</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45711"></A>   /************************* Variable declaration **************************/</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45712"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45713"></A>   intn   status_n;     /* returned status for functions returning an intn  */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45714"></A>   int32  status_32,    /* returned status for functions returning an int32 */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45715"></A>          file_id,      /* HDF file identifier */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45716"></A>          an_id,        /* AN interface identifier */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45717"></A>          file_label_id,  /* file label identifier */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45718"></A>          file_desc_id,   /* file description identifier */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45719"></A>          data_label_id,  /* data label identifier */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45720"></A>          data_desc_id,   /* data description identifier */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45721"></A>          vgroup_id;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45722"></A>   uint16 vgroup_tag, vgroup_ref;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45723"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45724"></A>   /********************** End of variable declaration **********************/</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45725"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45726"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45727"></A>   * Create the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45728"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45729"></A>   file_id = Hopen (FILE_NAME, DFACC_CREATE, 0);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45730"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45731"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45732"></A>   * Initialize the AN interface.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45733"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45734"></A>   an_id = ANstart(file_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45735"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45736"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45737"></A>   * Create the file label.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45738"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45739"></A>   file_label_id = ANcreatef(an_id, AN_FILE_LABEL);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45740"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45741"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45742"></A>   * Write the annotations to the file label.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45743"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45744"></A>   status_32 = ANwriteann(file_label_id, FILE_LABEL_TXT, </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45745"></A>                          strlen (FILE_LABEL_TXT));</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45746"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45747"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45748"></A>   * Create file description.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45749"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45750"></A>   file_desc_id = ANcreatef(an_id, AN_FILE_DESC);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45751"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45752"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45753"></A>   * Write the annotation to the file description.  </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45754"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45755"></A>   status_32 = ANwriteann(file_desc_id, FILE_DESC_TXT, </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45756"></A>                          strlen (FILE_DESC_TXT));</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45757"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45758"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45759"></A>   * Create a vgroup in the V interface.  Note that the vgroup’s ref number </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45760"></A>   * is set to -1 for creating and the access mode is &quot;w&quot; for writing.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45761"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45762"></A>   status_n = Vstart(file_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45763"></A>   vgroup_id = Vattach(file_id, -1, &quot;w&quot;);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45764"></A>   status_32 = Vsetname (vgroup_id, VG_NAME);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45765"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45766"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45767"></A>   * Obtain the tag and ref number of the vgroup for subsequent</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45768"></A>   * references.  </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45769"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45770"></A>   vgroup_tag = (uint16) VQuerytag (vgroup_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45771"></A>   vgroup_ref = (uint16) VQueryref (vgroup_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45772"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45773"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45774"></A>   * Create the data label for the vgroup identified by its tag </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45775"></A>   * and ref number.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45776"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45777"></A>   data_label_id = ANcreate(an_id, vgroup_tag, vgroup_ref, AN_DATA_LABEL);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45778"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45779"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45780"></A>   * Write the annotation text to the data label.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45781"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45782"></A>   status_32 = ANwriteann(data_label_id, DATA_LABEL_TXT, </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45783"></A>                          strlen(DATA_LABEL_TXT));</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45784"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45785"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45786"></A>   * Create the data description for the vgroup identified by its tag </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45787"></A>   * and ref number.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45788"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45789"></A>   data_desc_id = ANcreate(an_id, vgroup_tag, vgroup_ref, AN_DATA_DESC);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45790"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45791"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45792"></A>   * Write the annotation text to the data description.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45793"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45794"></A>   status_32 = ANwriteann(data_desc_id, DATA_DESC_TXT, strlen(DATA_DESC_TXT));</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45795"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45796"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45797"></A>   * Teminate access to the vgroup and to the V interface.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45798"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45799"></A>   status_32 = Vdetach(vgroup_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45800"></A>   status_n = Vend(file_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45801"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45802"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45803"></A>   * Terminate access to each annotation explicitly.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45804"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45805"></A>   status_n = ANendaccess(file_label_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45806"></A>   status_n = ANendaccess(file_desc_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45807"></A>   status_n = ANendaccess(data_label_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45808"></A>   status_n = ANendaccess(data_desc_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45809"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45810"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45811"></A>   * Terminate access to the AN interface and close the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45812"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45813"></A>   status_32 = ANend(an_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45814"></A>   status_n = Hclose(file_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45815"></A>}</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45817"></A>&nbsp;</P>
</DIV>
<DIV>
<H4 CLASS="Code-F-Title">
<A NAME="50593880_pgfId-23496"></A><DIV>
<IMG SRC="UG_html-65.gif" ALT="">
</DIV>
FORTRAN:	</H4>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45824"></A>      program create_annotation</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45825"></A>      implicit none</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45826"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45827"></A>C     Parameter declaration</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45828"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45829"></A>      character*22 FILE_NAME</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45830"></A>      character*9  VG_NAME</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45831"></A>      character*19 FILE_LABEL_TXT</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45832"></A>      character*53 FILE_DESC_TXT</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45833"></A>      character*16 DATA_LABEL_TXT</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45834"></A>      character*54 DATA_DESC_TXT</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45835"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45836"></A>      parameter (FILE_NAME      = ’General_HDFobjects.hdf’,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45837"></A>     +           VG_NAME        = ’AN Vgroup’,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45838"></A>     +           FILE_LABEL_TXT = ’General HDF objects’,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45839"></A>     +           DATA_LABEL_TXT = ’Common AN Vgroup’,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45840"></A>     +           FILE_DESC_TXT  = </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45841"></A>     + ’This is an HDF file that contains general HDF objects’,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45842"></A>     +           DATA_DESC_TXT  = </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45843"></A>     + ’This is a vgroup that is used to test data annotations’)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45844"></A>      integer DFACC_CREATE</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45845"></A>      parameter (DFACC_CREATE = 4)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45846"></A>      integer AN_FILE_LABEL, AN_FILE_DESC, AN_DATA_LABEL, AN_DATA_DESC</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45847"></A>      parameter (AN_FILE_LABEL = 2,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45848"></A>     +           AN_FILE_DESC  = 3,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45849"></A>     +           AN_DATA_LABEL = 0,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45850"></A>     +           AN_DATA_DESC  = 1)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45851"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45852"></A>C     Function declaration</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45853"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45854"></A>      integer hopen, hclose</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45855"></A>      integer afstart, affcreate, afwriteann, afcreate,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45856"></A>     +        afendaccess, afend</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45857"></A>      integer vfstart, vfatch, vfsnam, vqref, vqtag, vfdtch, vfend</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45858"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45859"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45860"></A>C**** Variable declaration ******************************************* </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45861"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45862"></A>      integer status</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45863"></A>      integer file_id, an_id</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45864"></A>      integer file_label_id, file_desc_id</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45865"></A>      integer data_label_id, data_desc_id</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45866"></A>      integer vgroup_id, vgroup_tag, vgroup_ref</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45867"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45868"></A>C**** End of variable declaration ************************************</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45869"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45870"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45871"></A>C     Create the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45872"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45873"></A>      file_id = hopen(FILE_NAME, DFACC_CREATE, 0)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45874"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45875"></A>C     Initialize the AN interface.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45876"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45877"></A>      an_id = afstart(file_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45878"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45879"></A>C     Create the file label.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45880"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45881"></A>      file_label_id = affcreate(an_id, AN_FILE_LABEL)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45882"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45883"></A>C     Write the annotation to the file label.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45884"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45885"></A>      status = afwriteann(file_label_id, FILE_LABEL_TXT,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45886"></A>     +                    len(FILE_LABEL_TXT))       </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45887"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45888"></A>C     Create file description.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45889"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45890"></A>      file_desc_id = affcreate(an_id, AN_FILE_DESC)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45891"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45892"></A>C     Write the annotation to the file description.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45893"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45894"></A>      status = afwriteann(file_desc_id, FILE_DESC_TXT,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45895"></A>     +                    len(FILE_DESC_TXT))</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45896"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45897"></A>C     Create a vgroup in the file. Note that the vgroup’s ref number is</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45898"></A>C     set to -1 for creating and the access mode is ’w’ for writing.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45899"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45900"></A>      status    = vfstart(file_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45901"></A>      vgroup_id = vfatch(file_id, -1, ’w’)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45902"></A>      status    = vfsnam(vgroup_id, VG_NAME)      </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45903"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45904"></A>C     Obtain the tag and reference number of the vgroup for subsequent</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45905"></A>C     references.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45906"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45907"></A>      vgroup_ref = vqref(vgroup_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45908"></A>      vgroup_tag = vqtag(vgroup_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45909"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45910"></A>C     Create the data label for the vgroup identified by its tag and ref </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45911"></A>C     number.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45912"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45913"></A>      data_label_id = afcreate(an_id, vgroup_tag, vgroup_ref,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45914"></A>     +                          AN_DATA_LABEL)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45915"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45916"></A>C     Write the annotation text to the data label.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45917"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45918"></A>      status = afwriteann(data_label_id, DATA_LABEL_TXT, </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45919"></A>     +                    len(DATA_LABEL_TXT))</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45920"></A>      </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45921"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45922"></A>C     Create the data description for the vgroup identified by its tag and ref.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45923"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45924"></A>      data_desc_id = afcreate(an_id, vgroup_tag, vgroup_ref, </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45925"></A>     +                        AN_DATA_DESC)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45926"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45927"></A>C     Write the annotation text to the data description.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45928"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45929"></A>      status = afwriteann(data_desc_id, DATA_DESC_TXT,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45930"></A>     +                    len(DATA_DESC_TXT))       </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45931"></A>C      </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45932"></A>C     Terminate access to the vgroup and to the V interface.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45933"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45934"></A>      status = vfdtch(vgroup_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45935"></A>      status = vfend(file_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45936"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45937"></A>C     Terminate access to each annotation explicitly.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45938"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45939"></A>      status = afendaccess(file_label_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45940"></A>      status = afendaccess(file_desc_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45941"></A>      status = afendaccess(data_label_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45942"></A>      status = afendaccess(data_desc_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45943"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45944"></A>C     Terminate access to the AN interface and close the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45945"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45946"></A>      status = afend(an_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45947"></A>      status = hclose(file_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45948"></A>      end </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44092"></A><A NAME="50593880_marker-25128"></A>&nbsp;</P>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593880_pgfId-25131"></A>	10.5	Reading Annot<A NAME="50593880_marker-25130"></A>ations Using the AN Interface<DIV>
<IMG SRC="UG_html-61.gif" ALT="">
</DIV>
</H5>
<P CLASS="Body">
<A NAME="50593880_pgfId-25132"></A>Reading an annotation is done by first selecting the desired annotation of the appropriate type using ANselect, then reading the annotation text using ANreadann. These two routines are described in this section. </P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-20012"></A>	10.5.1 <A NAME="50593880_30818"></A>Selecting an <A NAME="50593880_marker-20011"></A>Annotation: ANselect</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-45333"></A><EM CLASS="FunctionName">
ANselect</EM>
<A NAME="50593880_marker-45332"></A> obtains the identifier of the annotation specified by its index, <EM CLASS="VarName">
index</EM>
, and by its annotation type, <EM CLASS="VarName">
annot_type</EM>
. The syntax for <EM CLASS="FunctionName">
ANselect</EM>
 is as follows:</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-45334"></A><EM CLASS="syntaxLang">
C:</EM>
		ann_id = ANselect(an_id, index, annot_type);</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-45335"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	ann_id = afselect(an_id, index, annot_type)</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-45280"></A>The parameter <EM CLASS="VarName">
index</EM>
 is a nonnegative integer and is less than the total number of annotations of type <EM CLASS="VarName">
annot_type</EM>
 in the file. Use <EM CLASS="FunctionName">
ANfileinfo</EM>
, described in <A HREF="UG_html-10.htm#50593880_34412" CLASS="XRef">Obtaining the Number of Annotations: ANfileinfo</A>, to obtain the total number of annotations of type <EM CLASS="VarName">
annot_type</EM>
 in the file.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-20311"></A>Possible valid values of <EM CLASS="VarName">
annot_type</EM>
 are <EM CLASS="DefName">
AN_DATA_LABEL</EM>
 (or <EM CLASS="DefName">
0</EM>
) for a data label, <EM CLASS="DefName">
AN_DATA_DESC</EM>
 (or <EM CLASS="DefName">
1</EM>
) for a data description, <EM CLASS="DefName">
AN_FILE_LABEL</EM>
 (or <EM CLASS="DefName">
2</EM>
) for a file label, and <EM CLASS="DefName">
AN_FILE_DESC</EM>
 (or <EM CLASS="DefName">
3</EM>
) for a file description.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-20302"></A><EM CLASS="FunctionName">
ANselect</EM>
 returns an annotation identifier or <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
) upon unsuccessful completion. The parameters of <EM CLASS="FunctionName">
ANselect</EM>
 are further described in Vdata .</P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-6100"></A>	10.5.2 <A NAME="50593880_28912"></A>Reading<A NAME="50593880_marker-12284"></A> an Annotation: ANreadann</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-24920"></A><EM CLASS="FunctionName">
ANreadann</EM>
 reads the annotation specified by the parameter <EM CLASS="VarName">
ann_id</EM>
 and stores the annotation text in the parameter <EM CLASS="VarName">
ann_buf</EM>
.  The syntax for <EM CLASS="FunctionName">
ANreadann</EM>
 is as follows</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-24937"></A><EM CLASS="syntaxLang">
C:</EM>
		status = ANreadann(ann_id, ann_buf, ann_length);</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-24922"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = afreadann(ann_id, ann_buf, ann_length)</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-21831"></A>The parameter <EM CLASS="VarName">
ann_length</EM>
 specifies the size of the buffer <EM CLASS="VarName">
ann_buf</EM>
. If the length of the file or data label to be read is greater than or equal to <EM CLASS="VarName">
ann_length</EM>
, the label will be truncated to <EM CLASS="VarName">
ann_length </EM>
- 1 characters. If the length of the file or data description is greater than <EM CLASS="VarName">
ann_length</EM>
, the description will be truncated to <EM CLASS="VarName">
ann_length</EM>
 characters. The HDF library adds a <EM CLASS="DefName">
NULL</EM>
 character to the retrieved label but not to the description. The user must add a <EM CLASS="DefName">
NULL</EM>
 character to the retrieved description if the C library string functions are to operate on this description. <A NAME="50593880_marker-21832"></A></P>
<P CLASS="Body">
<A NAME="50593880_pgfId-21408"></A><EM CLASS="FunctionName">
ANreadann</EM>
 returns either <EM CLASS="DefName">
SUCCEED</EM>
 (or <EM CLASS="DefName">
0</EM>
) or <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
). The parameters of <EM CLASS="FunctionName">
ANreadann</EM>
 are further described in <A HREF="UG_html-10.htm#50593880_41885" CLASS="XRef">Table 10D</A>.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593880_pgfId-7805"></A><DIV>
<IMG SRC="UG_html-62.gif" ALT="">
</DIV>
<A NAME="50593880_41885"></A><A NAME="50593880_37700"></A>ANs<A NAME="50593880_marker-22641"></A>elect and ANre<A NAME="50593880_marker-12286"></A>adann Parameter Lists</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16658"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-19400"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16659"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16661"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16663"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16667"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16673"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16675"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="3" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22529"></A>ANselect</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-22530"></A>[int32]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22531"></A>(afselect)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22533"></A>an_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22535"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22537"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22539"></A>AN interface identifier</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22543"></A>index</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22545"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22547"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22549"></A>Index of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22553"></A>annot_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22555"></A>ann_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22557"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22559"></A>Type of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="3" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-19402"></A>ANreadann</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-19403"></A>[int32]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-16680"></A>(afreadann)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16682"></A>ann_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16684"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16686"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-16688"></A>Annotation identifier</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16692"></A>ann_buf</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16694"></A>char *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16696"></A>character*(*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-16698"></A>Buffer for the returned annotation text</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16702"></A>ann_length</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16704"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16706"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-16709"></A>Number of characters to be retrieved from the annotation<A NAME="50593880_marker-16708"></A></P>
</TD>
</TR>
</TABLE>
</DIV>
<DIV>
<H6 CLASS="Example">
<A NAME="50593880_pgfId-44542"></A><DIV>
<IMG SRC="UG_html-62.gif" ALT="">
</DIV>
Reading File and Data Annotations</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-44544"></A>This example illustrates the use of <EM CLASS="FunctionName">
ANfileinfo/affileinfo</EM>
 to get the number of data and file annotations in the file, <EM CLASS="FunctionName">
ANselect/afselect</EM>
 to get an annotation, <EM CLASS="FunctionName">
ANannlen/afannlen</EM>
 to get the length of the annotation, and <EM CLASS="FunctionName">
ANreadann/afreadann</EM>
 to read the contents of the annotation.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-44549"></A>In this example, the program reads some of the annotations created in the file &quot;General_HDFobjects.hdf&quot; by Example 1.  The program first gets the information on the annotations in the file so that the number of existing annotations of each kind is available prior to reading.  The program then gets the length of each annotation and allocates sufficient space for the contents of the annotation to be read. For the simplicity of this example, only the data labels are read. Any other annotations can be read by adding the for loop with appropriate values as noted below.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-46422"></A>This example uses the <EM CLASS="FunctionName">
ANfileinfo/affileinfo</EM>
 routine to get annotation information. This rouitne is described in the Section 10.6.1  </P>
</DIV>
</DIV>
</DIV>
</DIV>
<DIV>
<H4 CLASS="Code-C-Title">
<A NAME="50593880_pgfId-46697"></A><DIV>
<IMG SRC="UG_html-65.gif" ALT="">
</DIV>
C:		</H4>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-46416"></A>#include &quot;hdf.h&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44097"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44098"></A>#define  FILE_NAME   &quot;General_HDFobjects.hdf&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44099"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44100"></A>main( )</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44101"></A>{</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44102"></A>   /************************* Variable declaration **************************/</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44103"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44104"></A>   intn  status_n;      /* returned status for functions returning an intn  */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44105"></A>   int32 status_32,     /* returned status for functions returning an int32 */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44106"></A>         file_id,       /* HDF file identifier */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44107"></A>         an_id,         /* AN interface identifier */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44108"></A>         ann_id,        /* an annotation identifier */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44109"></A>         index,         /* position of an annotation in all of the same type*/</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44110"></A>         ann_length,    /* length of the text in an annotation */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44111"></A>         n_file_labels, n_file_descs, n_data_labels, n_data_descs;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44112"></A>   char *ann_buf;       /* buffer to hold the read annotation */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44113"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44114"></A>   /********************** End of variable declaration **********************/</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44115"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44116"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44117"></A>   * Open the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44118"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44119"></A>   file_id = Hopen (FILE_NAME, DFACC_READ, 0);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44120"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44121"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44122"></A>   * Initialize the AN interface.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44123"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44124"></A>   an_id = ANstart (file_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44125"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44126"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44127"></A>   * Get the annotation information, e.g., the numbers of file labels, file</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44128"></A>   * descriptions, data labels, and data descriptions.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44129"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44130"></A>   status_n = ANfileinfo (an_id, &amp;n_file_labels, &amp;n_file_descs,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44131"></A>                        &amp;n_data_labels, &amp;n_data_descs);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44132"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44133"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44134"></A>   * Get the data labels.  Note that this for loop can be used to</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44135"></A>   * obtain the contents of each kind of annotation with the appropriate</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44136"></A>   * number of annotations and the type of annotation, i.e., replace</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44137"></A>   * n_data_labels with n_file_labels, n_file_descs, or n_data_descs, and</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44138"></A>   * AN_DATA_LABEL with AN_FILE_LABEL, AN_FILE_DESC, or AN_DATA_DESC,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44139"></A>   * respectively.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44140"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44141"></A>   for (index = 0; index &lt; n_data_labels; index++)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44142"></A>   {</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44143"></A>      /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44144"></A>      * Get the identifier of the current data label.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44145"></A>      */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44146"></A>      ann_id = ANselect (an_id, index, AN_DATA_LABEL);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44147"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44148"></A>      /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44149"></A>      * Get the length of the data label.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44150"></A>      */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44151"></A>      ann_length = ANannlen (ann_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44152"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44153"></A>      /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44154"></A>      * Allocate space for the buffer to hold the data label text.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44155"></A>      */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44156"></A>      ann_buf = malloc ((ann_length+1) * sizeof (char));</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44157"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44158"></A>      /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44159"></A>      * Read and display the data label.  Note that the size of the buffer,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44160"></A>      * i.e., the third parameter, is 1 character more than the length of</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44161"></A>      * the data label; that is for the null character.  It is not the case</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44162"></A>      * when a description is retrieved because the description does not </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44163"></A>      * necessarily end with a null character.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44164"></A>      * </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44165"></A>      */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44166"></A>      status_32 = ANreadann (ann_id, ann_buf, ann_length+1);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44167"></A>      printf (&quot;Data label index: %d\n&quot;, index);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44168"></A>      printf (&quot;Data label contents: %s\n&quot;, ann_buf);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44169"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44170"></A>      /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44171"></A>      * Terminate access to the current data label.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44172"></A>      */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44173"></A>      status_n = ANendaccess (ann_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44174"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44175"></A>      /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44176"></A>      * Free the space allocated for the annotation buffer.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44177"></A>      */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44178"></A>      free (ann_buf);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44179"></A>   }</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44180"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44181"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44182"></A>   * Terminate access to the AN interface and close the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44183"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44184"></A>   status_32 = ANend (an_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44185"></A>   status_n = Hclose (file_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44186"></A>}</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-46707"></A>&nbsp;</P>
</DIV>
<DIV>
<H4 CLASS="Code-F-Title">
<A NAME="50593880_pgfId-46709"></A><DIV>
<IMG SRC="UG_html-65.gif" ALT="">
</DIV>
FORTRAN:</H4>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44767"></A>      program  read_annotation</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44782"></A>      implicit none</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44783"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44784"></A>C     Parameter declaration</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44785"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44786"></A>      character*22 FILE_NAME</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44787"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44788"></A>      parameter (FILE_NAME = ’General_HDFobjects.hdf’)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44789"></A>      integer    DFACC_READ</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44790"></A>      parameter (DFACC_READ = 1)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44791"></A>      integer    AN_DATA_LABEL</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44792"></A>      parameter (AN_DATA_LABEL = 0)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44793"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44794"></A>C     Function declaration</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44795"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44796"></A>      integer hopen, hclose</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44797"></A>      integer afstart, affileinfo, afselect, afannlen, afreadann,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44798"></A>     +        afendaccess, afend</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44799"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44800"></A>C**** Variable declaration *******************************************</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44801"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44802"></A>      integer status</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44803"></A>      integer file_id, an_id, ann_id</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44804"></A>      integer index, ann_length </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44805"></A>      integer n_file_labels, n_file_descs, n_data_labels, n_data_descs </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44806"></A>      character*256 ann_buf </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44807"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44808"></A>C**** End of variable declaration ************************************</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44809"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44810"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44811"></A>C     Open the HDF file for reading.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44812"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44813"></A>      file_id = hopen(FILE_NAME, DFACC_READ, 0)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44814"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44815"></A>C     Initialize the AN interface.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44816"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44817"></A>      an_id = afstart(file_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44818"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44819"></A>C     Get the annotation information, i.e., the number of file labels,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44820"></A>C     file descriptions, data labels, and data descriptions.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44821"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44822"></A>      status = affileinfo(an_id, n_file_labels, n_file_descs,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44823"></A>     +                    n_data_labels, n_data_descs)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44824"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44825"></A>C     Get the data labels. Note that this DO loop can be used to obtain </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44826"></A>C     the contents of each kind of annotation with the appropriate number</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44827"></A>C     of annotations and the type of annotation, i.e., replace</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44828"></A>C     n_data_labels with n_file_labels, n_files_descs, or n_data_descs, and</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44829"></A>C     AN_DATA_LABEL with AN_FILE_LABEL, AN_FILE_DESC, or AN_DATA_DESC, </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44830"></A>C     respectively.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44831"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44832"></A>      do 10 index = 0, n_data_labels-1</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44833"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44834"></A>C     Get the identifier of the current data label.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44835"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44836"></A>      ann_id = afselect(an_id, index, AN_DATA_LABEL)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44837"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44838"></A>C     Get the length of the data label.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44839"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44840"></A>      ann_length = afannlen(ann_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44841"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44842"></A>C     Read and display the data label. The data label is read into buffer</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44843"></A>C     ann_buf. One has to make sure that ann_buf has sufficient size to hold</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44844"></A>C     the data label. Also note, that the third argument to afreadann is </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44845"></A>C     1 greater that the actual length of the data label (see comment to</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44846"></A>C     C example).</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44847"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44848"></A>      status = afreadann(ann_id, ann_buf, ann_length+1) </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44849"></A>      write(*,*) ’Data label index: ’, index</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44850"></A>      write(*,*) ’Data label contents: ’, ann_buf(1:ann_length) </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44851"></A>10    continue</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44852"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44853"></A>C     Terminate access to the current data label.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44854"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44855"></A>      status = afendaccess(ann_id)  </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44856"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44857"></A>C     Terminate access to the AN interface and close the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44858"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44859"></A>      status = afend(an_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44860"></A>      status = hclose(file_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44861"></A>      end</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44862"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-44863"></A>	</P>
<DIV>
<H5 CLASS="Heading2">
<A NAME="50593880_pgfId-26591"></A>	10.6	Obtai<A NAME="50593880_marker-12287"></A>ning Annotation Information Using the AN Interface<DIV>
<IMG SRC="UG_html-61.gif" ALT="">
</DIV>
</H5>
<P CLASS="Body">
<A NAME="50593880_pgfId-8017"></A>The HDF library provides various AN routines to obtain annotation information for the purpose of locating either a particular annotation or a set of annotations that correspond to a set of search criteria. The following sections describe these AN routines.</P>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-8018"></A>	10.6.1 <A NAME="50593880_34412"></A>Obtaining the Number of <A NAME="50593880_marker-12294"></A>Annotations: ANfileinfo</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-45345"></A><EM CLASS="FunctionName">
ANfileinfo</EM>
<A NAME="50593880_marker-45344"></A> retrieves the total number of file labels, file descriptions, data labels, and data descriptions in the file identified by the parameter <EM CLASS="VarName">
an_id</EM>
. The syntax for <EM CLASS="FunctionName">
ANfileinfo</EM>
 is as follows:</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-45346"></A><EM CLASS="syntaxLang">
C:</EM>
		status = ANfileinfo(an_id, &amp;n_file_labels, &amp;n_file_descs, &amp;n_data_labels, &amp;n_data_descs);</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-20388"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = affileinfo(an_id, n_file_labels, n_file_descs, n_data_labels, n_data_descs)</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-21771"></A>The retrieved information will be stored in the parameters <EM CLASS="VarName">
n_file_labels</EM>
, <EM CLASS="VarName">
n_file_descs</EM>
, <EM CLASS="VarName">
n_data_labels</EM>
, and <EM CLASS="VarName">
n_data_descs</EM>
, respectively. They can also be used as loop boundaries. </P>
<P CLASS="Body">
<A NAME="50593880_pgfId-44392"></A><EM CLASS="FunctionName">
ANfileinfo</EM>
 returns either <EM CLASS="DefName">
SUCCEED</EM>
 (or <EM CLASS="DefName">
0</EM>
) or <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
). The parameters of <EM CLASS="FunctionName">
ANfileinfo</EM>
 are further described in <A HREF="UG_html-10.htm#50593880_14756" CLASS="XRef">Table 10E</A>.</P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-8831"></A>	10.6.2 <A NAME="50593880_34049"></A>Getting <A NAME="50593880_marker-12297"></A>the Length of an Annotation: ANannlen</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-45353"></A><EM CLASS="FunctionName">
ANannlen</EM>
<A NAME="50593880_marker-45352"></A> returns either the length of the annotation, identified by the parameter <EM CLASS="VarName">
ann_id</EM>
, or <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
) upon unsuccessful completion. The syntax for <EM CLASS="FunctionName">
ANannlen</EM>
 is as follows:</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-45354"></A><EM CLASS="syntaxLang">
C:</EM>
		ann_len = ANannlen(ann_id);</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-45355"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	ann_len = afannlen(ann_id)</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-20595"></A>The parameters of <EM CLASS="FunctionName">
ANannlen</EM>
 are further described in <A HREF="UG_html-10.htm#50593880_14756" CLASS="XRef">Table 10E</A>.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593880_pgfId-8947"></A><DIV>
<IMG SRC="UG_html-62.gif" ALT="">
</DIV>
<A NAME="50593880_14756"></A><A NAME="50593880_12318"></A>ANfile<A NAME="50593880_marker-22647"></A>info and ANa<A NAME="50593880_marker-12299"></A>nnlen Parameter Lists</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16853"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-19410"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16854"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16856"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16858"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16862"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16868"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16870"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="5" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22586"></A>ANfileinfo</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-22587"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22588"></A>(affileinfo)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22590"></A>an_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22592"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22594"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22596"></A>AN interface identifier</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22600"></A>n_file_labels</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22602"></A>int32 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22604"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22606"></A>Number of file labels in the file</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22610"></A>n_file_descs</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22612"></A>int32 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22614"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22616"></A>Number of file descriptions in the file</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22620"></A>n_data_labels</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22622"></A>int32 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22624"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22626"></A>Number of data labels in the file</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22630"></A>n_data_descs</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22632"></A>int32 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22634"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22636"></A>Number of data descriptions in the file</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-16874"></A>ANannlen</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-19411"></A>[int32]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-16875"></A>(afannlen)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16877"></A>ann_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16879"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16881"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-16883"></A>Annotation identifier</P>
</TD>
</TR>
</TABLE>
</DIV>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-23844"></A>	10.6.3 <A NAME="50593880_12781"></A>Obtainin<A NAME="50593880_marker-22667"></A>g the Number of Specifically-typed Annotations of a Data Object: ANnumann</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-22669"></A><EM CLASS="FunctionName">
ANnumann</EM>
<A NAME="50593880_marker-22674"></A> returns the total number of annotations that are of type <EM CLASS="VarName">
annot_type</EM>
 and that are attached to the object identified by its tag, <EM CLASS="VarName">
obj_tag</EM>
, and reference number, <EM CLASS="VarName">
obj_ref</EM>
. The syntax for <EM CLASS="FunctionName">
ANnumann</EM>
 is as follows:</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-22670"></A><EM CLASS="syntaxLang">
C:</EM>
		ann_num = ANnumann(an_id, annot_type, obj_tag, obj_ref);</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-20408"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	ann_num = afnumann(an_id, annot_type, obj_tag, obj_ref)</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-20633"></A>As this routine is implemented only to obtain the total number of data annotations and not file annotations, the valid values of <EM CLASS="VarName">
annot_type</EM>
 are <EM CLASS="DefName">
AN_DATA_LABEL</EM>
 (or <EM CLASS="DefName">
0</EM>
) and <EM CLASS="DefName">
AN_DATA_DESC</EM>
 (or <EM CLASS="DefName">
1</EM>
). To obtain the total number of file annotations or all data annotations, use <EM CLASS="FunctionName">
ANfileinfo</EM>
.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-20689"></A><EM CLASS="FunctionName">
ANnumann</EM>
 returns the total number of qualified annotations or <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
). The parameters of <EM CLASS="FunctionName">
ANnumann</EM>
 are further described in <A HREF="UG_html-10.htm#50593880_41333" CLASS="XRef">Table 10F</A>.</P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-8038"></A>	10.6.4 <A NAME="50593880_21683"></A>Obtainin<A NAME="50593880_marker-12303"></A>g the List of Specifically-typed Annotation Identifiers of a Data Object: ANannlist</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-45414"></A><EM CLASS="FunctionName">
ANannlist</EM>
<A NAME="50593880_marker-45413"></A> retrieves the annotation identifiers for all of the annotations that are of type <EM CLASS="VarName">
annot_type</EM>
 and belong to the object identified by its tag, <EM CLASS="VarName">
obj_tag</EM>
, and its reference number, <EM CLASS="VarName">
obj_ref</EM>
. The syntax for <EM CLASS="FunctionName">
ANannlist</EM>
 is as follows:</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-45415"></A><EM CLASS="syntaxLang">
C:</EM>
		status = ANannlist(an_id, annot_type, obj_tag, obj_ref, ann_list);</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-20418"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = afselect(an_id, annot_type, obj_tag, obj_ref, ann_list)</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-8982"></A>The identifiers of the retrieved annotations are stored in the parameter <EM CLASS="VarName">
ann_list</EM>
. The routine <EM CLASS="FunctionName">
ANnumann</EM>
 can be used to obtain the number of annotations to be retrieved for dynamic memory allocation.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-20741"></A><EM CLASS="FunctionName">
ANannlist</EM>
 returns the number of identifiers found, if succesful, or <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
). The parameters of <EM CLASS="FunctionName">
ANannlist</EM>
 are further described in <A HREF="UG_html-10.htm#50593880_42728" CLASS="XRef">Table 10F</A>.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593880_pgfId-8336"></A><DIV>
<IMG SRC="UG_html-62.gif" ALT="">
</DIV>
<A NAME="50593880_42728"></A><A NAME="50593880_41333"></A>ANn<A NAME="50593880_marker-22728"></A>umann and ANannlis<A NAME="50593880_marker-12305"></A>t Parameter Lists</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16959"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-19414"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16960"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16962"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16964"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16968"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16974"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-16976"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="4" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22682"></A>ANnumann</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-22683"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22684"></A>(afnumann)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22686"></A>an_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22688"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22690"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22692"></A>AN interface identifier</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22696"></A>annot_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22698"></A>ann_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22700"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22702"></A>Type of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22706"></A>obj_tag</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22708"></A>uint16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22710"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22712"></A>Tag of the object the annotation is attached to</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22716"></A>obj_ref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22718"></A>uint16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22720"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22722"></A>Reference number of the object the annotation is attached to</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="5" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-16980"></A>ANannlist</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-19415"></A>[intn]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-16981"></A>(afannlist)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16983"></A>an_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16985"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16987"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-16989"></A>AN interface identifier</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16993"></A>annot_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16995"></A>ann_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-16997"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-16999"></A>Type of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-17003"></A>obj_tag</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-17005"></A>uint16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-17007"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-17009"></A>Tag of the object the annotation is attached to</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-17013"></A>obj_ref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-17015"></A>uint16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-17017"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-17019"></A>Reference number of the object the annotation is attached to</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-17023"></A>ann_list</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-17025"></A>int32 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-17027"></A>integer (*)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-17029"></A>Buffer for returned annotation identifiers that match the search criteria</P>
</TD>
</TR>
</TABLE>
</DIV>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-13420"></A>	10.6.5 <A NAME="50593880_marker-13515"></A><A NAME="50593880_marker-13516"></A><A NAME="50593880_16226"></A>Obtaining the Tag/Reference Number Pair of the Specified<BR>
		Annotation Index and Type: ANget_tagref</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-20425"></A><EM CLASS="FunctionName">
ANget_tagref</EM>
<A NAME="50593880_marker-22781"></A> retrieves the tag and reference number of the annotation identified by its index, specified by the parameter <EM CLASS="VarName">
index</EM>
, and by the annotation type, specified by the parameter <EM CLASS="VarName">
annot_type</EM>
. The syntax for <EM CLASS="FunctionName">
ANget_tagref</EM>
 is as follows:</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-21891"></A><EM CLASS="syntaxLang">
C:</EM>
		status = ANget_tagref(an_id, index, annot_type, &amp;ann_tag, &amp;ann_ref);</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-21893"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = afgettagref(an_id, index, annot_type, ann_tag, ann_ref)</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-22796"></A>The tag is stored in the parameter <EM CLASS="VarName">
ann_tag</EM>
 and the reference number is stored in the parameter <EM CLASS="VarName">
ann_ref</EM>
. The parameter <EM CLASS="VarName">
index</EM>
 is a nonnegative value and is less than the total number of annotations of type <EM CLASS="VarName">
annot_type</EM>
 in the file. Use <EM CLASS="FunctionName">
ANfileinfo</EM>
 to obtain the total number of annotations of type <EM CLASS="VarName">
annot_type</EM>
 in the file.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-20858"></A>The value of <EM CLASS="VarName">
annot_type</EM>
 can be either <EM CLASS="DefName">
AN_DATA_LABEL</EM>
 (or <EM CLASS="DefName">
0</EM>
), <EM CLASS="DefName">
AN_DATA_DESC</EM>
 (or <EM CLASS="DefName">
1</EM>
), <EM CLASS="DefName">
AN_FILE_LABEL</EM>
 (or <EM CLASS="DefName">
2</EM>
), or <EM CLASS="DefName">
AN_FILE_DESC</EM>
 (or <EM CLASS="DefName">
3</EM>
).</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-21458"></A><EM CLASS="FunctionName">
ANget_tagref</EM>
 returns either <EM CLASS="DefName">
SUCCEED</EM>
 (or <EM CLASS="DefName">
0</EM>
) or <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
). The parameters of <EM CLASS="FunctionName">
ANget_tagref</EM>
 are further described in <A HREF="UG_html-10.htm#50593880_19581" CLASS="XRef">ANget_tagref, ANid2tagref, ANtagref2id, ANatype2tag, and ANtag2atype Parameter Lists</A>.</P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-13068"></A>	10.6.6 <A NAME="50593880_37570"></A>Obtaining the Tag/Reference Number Pair from a Specified Annotation Identifier: ANid2tagref</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-45304"></A><EM CLASS="FunctionName">
ANid2tagref</EM>
<A NAME="50593880_marker-45303"></A> retrieves the tag/reference number pair of the annotation identified by the parameter <EM CLASS="VarName">
ann_id</EM>
. The syntax for <EM CLASS="FunctionName">
ANid2tagref</EM>
 is as follows:</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-45305"></A><EM CLASS="syntaxLang">
C:</EM>
		status = ANid2tagref(ann_id, &amp;ann_tag, &amp;ann_ref);</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-20438"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	status = afidtagref(ann_id, ann_tag, ann_ref)</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-21560"></A><EM CLASS="FunctionName">
ANid2tagref</EM>
 stores the retrieved tag and reference number into the parameters <EM CLASS="VarName">
ann_tag</EM>
 and <EM CLASS="VarName">
ann_ref</EM>
. Possible values returned in <EM CLASS="VarName">
ann_tag</EM>
 are <EM CLASS="DefName">
DFTAG_DIL</EM>
 (or <EM CLASS="DefName">
104</EM>
) for a data label, <EM CLASS="DefName">
DFTAG_DIA</EM>
 (or <EM CLASS="DefName">
105</EM>
) for a data description, <EM CLASS="DefName">
DFTAG_FID</EM>
 (or <EM CLASS="DefName">
100</EM>
) for a file label, and <EM CLASS="DefName">
DFTAG_FD</EM>
 (or <EM CLASS="DefName">
101</EM>
) for a file description. </P>
<P CLASS="Body">
<A NAME="50593880_pgfId-21561"></A><EM CLASS="FunctionName">
ANid2tagref</EM>
 returns either <EM CLASS="DefName">
SUCCEED</EM>
 (or <EM CLASS="DefName">
0</EM>
) or <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
). The parameters of <EM CLASS="FunctionName">
ANid2tagref</EM>
 are further described in <A HREF="UG_html-10.htm#50593880_19581" CLASS="XRef">ANget_tagref, ANid2tagref, ANtagref2id, ANatype2tag, and ANtag2atype Parameter Lists</A>.</P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-13623"></A>	10.6.7 <A NAME="50593880_20817"></A>Obtaining the Annotation Identifier from a Specified Tag/Reference Number Pair: ANtagref2id</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-20445"></A><EM CLASS="FunctionName">
ANtagref2id</EM>
<A NAME="50593880_marker-23015"></A> routine returns the identifier of the annotation that is specified by its tag/reference number pair or <EM CLASS="DefName">
FAIL</EM>
 (or <EM CLASS="DefName">
-1</EM>
). The syntax for <EM CLASS="FunctionName">
ANtagref2id</EM>
 is as follows:</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-20446"></A><EM CLASS="syntaxLang">
C:</EM>
		ann_id = ANtagref2id(an_id, ann_tag, ann_ref);</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-20448"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	ann_id = aftagrefid(an_id, ann_tag, ann_ref)</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-22174"></A>The parameters of <EM CLASS="FunctionName">
ANtagref2id</EM>
 are further described in <A HREF="UG_html-10.htm#50593880_19581" CLASS="XRef">ANget_tagref, ANid2tagref, ANtagref2id, ANatype2tag, and ANtag2atype Parameter Lists</A>.</P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-13230"></A>	10.6.8 <A NAME="50593880_13394"></A>Obtaining an Annotation Tag from a Specified Annotation Type: ANatype2tag</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-45396"></A><EM CLASS="FunctionName">
ANatype2tag</EM>
<A NAME="50593880_marker-45395"></A> returns the tag that corresponds to the annotation type specified by the parameter <EM CLASS="VarName">
annot_type</EM>
 if successful, or <EM CLASS="DefName">
DFTAG_NULL</EM>
 (or <EM CLASS="DefName">
0</EM>
) otherwise. The syntax for <EM CLASS="FunctionName">
ANatype2tag</EM>
 is as follows:</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-45397"></A><EM CLASS="syntaxLang">
C:</EM>
		ann_tag = ANatype2tag(annot_type);</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-45398"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	ann_tag = afatypetag(annot_type)</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-48052"></A>The following table lists the valid values of <EM CLASS="VarName">
annot_type</EM>
 in the left column and the corresponding values for the returned annotation tag on the right.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-48080"></A>&nbsp;</P>
<TABLE>
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-48055"></A>Annotation Type</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-48057"></A>Annotation Tag</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48059"></A><EM CLASS="DefName">
AN_DATA_LABEL</EM>
 (or <EM CLASS="DefName">
0</EM>
)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48061"></A><EM CLASS="DefName">
DFTAG_DIL</EM>
 (or <EM CLASS="DefName">
104</EM>
)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48063"></A><EM CLASS="DefName">
AN_DATA_DESC</EM>
 (or <EM CLASS="DefName">
1</EM>
)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48065"></A><EM CLASS="DefName">
DFTAG_DIA</EM>
 (or <EM CLASS="DefName">
105</EM>
)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48067"></A><EM CLASS="DefName">
AN_FILE_LABEL</EM>
 (or <EM CLASS="DefName">
2</EM>
)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48069"></A><EM CLASS="DefName">
DFTAG_FID</EM>
 (or <EM CLASS="DefName">
100</EM>
)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48071"></A><EM CLASS="DefName">
AN_FILE_DESC</EM>
 (or <EM CLASS="DefName">
3</EM>
)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48073"></A><EM CLASS="DefName">
DFTAG_FD</EM>
 (or <EM CLASS="DefName">
101</EM>
)</P>
</TD>
</TR>
</TABLE>
<P CLASS="Body">
<A NAME="50593880_pgfId-48077"></A>The parameters of <EM CLASS="FunctionName">
ANatype2tag</EM>
 are further described in <A HREF="UG_html-10.htm#50593880_19581" CLASS="XRef">Table 10G</A>.</P>
</DIV>
<DIV>
<H6 CLASS="Heading3">
<A NAME="50593880_pgfId-13319"></A>	10.6.9 <A NAME="50593880_41152"></A>Obtaining an Annotation Type from a Specified Object Tag: ANtag2atype</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-20465"></A><EM CLASS="FunctionName">
ANtag2atype</EM>
<A NAME="50593880_marker-23040"></A> returns the annotation type corresponding to the annotation tag <EM CLASS="VarName">
ann_tag</EM>
 if successful, or <EM CLASS="DefName">
AN_UNDEF</EM>
 (or <EM CLASS="DefName">
-1</EM>
) otherwise. The syntax for <EM CLASS="FunctionName">
ANtag2atype</EM>
 is as follows:</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-20466"></A><EM CLASS="syntaxLang">
C:</EM>
		annot_type = ANtag2atype(ann_tag);</P>
<P CLASS="FM1-syntax">
<A NAME="50593880_pgfId-20468"></A><EM CLASS="syntaxLang">
FORTRAN:</EM>
	annot_type = aftagatype(ann_tag)</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-48081"></A>The following table lists the valid values of <EM CLASS="VarName">
ann_tag</EM>
 in the left column and the corresponding values of the returned annotation type in the right column.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-48109"></A>&nbsp;</P>
<TABLE>
<TR>
<TH ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-48084"></A>Annotation Tag</P>
</TH>
<TH ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-48086"></A>Annotation Type</P>
</TH>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48088"></A><EM CLASS="DefName">
DFTAG_DIL </EM>
(or <EM CLASS="DefName">
104</EM>
) </P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48090"></A><EM CLASS="DefName">
AN_DATA_LABEL </EM>
(or <EM CLASS="DefName">
0</EM>
)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48092"></A><EM CLASS="DefName">
DFTAG_DIA </EM>
(or <EM CLASS="DefName">
105</EM>
)</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48094"></A><EM CLASS="DefName">
AN_DATA_DESC </EM>
(or <EM CLASS="DefName">
1</EM>
)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48096"></A><EM CLASS="DefName">
DFTAG_FID </EM>
(or <EM CLASS="DefName">
100</EM>
) </P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48098"></A><EM CLASS="DefName">
AN_FILE_LABEL </EM>
(or <EM CLASS="DefName">
2</EM>
)</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48100"></A><EM CLASS="DefName">
DFTAG_FD </EM>
(or <EM CLASS="DefName">
101</EM>
) </P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableElement">
<A NAME="50593880_pgfId-48102"></A><EM CLASS="DefName">
AN_FILE_DESC </EM>
(or <EM CLASS="DefName">
3</EM>
)</P>
</TD>
</TR>
</TABLE>
<P CLASS="Body">
<A NAME="50593880_pgfId-48106"></A>The parameters of <EM CLASS="FunctionName">
ANtag2atype</EM>
 are further described in <A HREF="UG_html-10.htm#50593880_19581" CLASS="XRef">Table 10G</A>.</P>
<DIV>
<H6 CLASS="Table">
<A NAME="50593880_pgfId-13397"></A><DIV>
<IMG SRC="UG_html-62.gif" ALT="">
</DIV>
<A NAME="50593880_19581"></A>ANget_tagr<A NAME="50593880_marker-22958"></A>ef, ANi<A NAME="50593880_marker-22959"></A>d2tagref, ANtagref2<A NAME="50593880_marker-22960"></A>id, ANatype2ta<A NAME="50593880_marker-22961"></A>g, and ANtag<A NAME="50593880_marker-13734"></A>2atype Parameter Lists</H6>
<TABLE>
<TR>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-17272"></A>Routine Name</P>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-19433"></A>[Return Type]</H6>
<P CLASS="TableHead">
<A NAME="50593880_pgfId-17273"></A>(FORTRAN-77)</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-17275"></A>Parameter</P>
</TD>
<TD ROWSPAN="1" COLSPAN="2">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-17277"></A>Parameter Type</P>
</TD>
<TD ROWSPAN="2" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-17281"></A>Description</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-17287"></A>C</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableHead">
<A NAME="50593880_pgfId-17289"></A>FORTRAN-77</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="5" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22802"></A>ANget_tagref</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-22803"></A>[int32]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22804"></A>(afgettagref)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22806"></A>an_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22808"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22810"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22812"></A>AN interface identifier</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22816"></A>ann_index</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22818"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22820"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22822"></A>Index of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22826"></A>annot_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22828"></A>ann_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22830"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22832"></A>Annotation type of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22836"></A>ann_tag</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22838"></A>uint16 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22840"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22842"></A>Tag of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22846"></A>ann_ref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22848"></A>uint16 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22850"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22852"></A>Reference number of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="3" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22898"></A>ANid2tagref</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-22899"></A>[int32]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22900"></A>(afidtagref)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22902"></A>ann_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22904"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22906"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22908"></A> Identifier of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22912"></A>ann_tag</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22914"></A>uint16 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22916"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22918"></A>Tag of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22922"></A>ann_ref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22924"></A>uint16 *</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22926"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22928"></A>Reference number of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="3" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22866"></A>ANtagref2id</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-22867"></A>[int32]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22868"></A>(aftagrefid)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22870"></A>an_id</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22872"></A>int32</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22874"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22876"></A>AN interface identifier</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22880"></A>ann_tag</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22882"></A>uint16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22884"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22886"></A>Tag of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22890"></A>ann_ref</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22892"></A>uint16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22894"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22896"></A>Reference number of the annotation</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22854"></A>ANatype2tag</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-22855"></A>[uint16]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-22856"></A>(afatypetag)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22858"></A>annot_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22860"></A>ann_type</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-22862"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-22864"></A>Annotation type</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-17293"></A>ANtag2atype</H6>
<H6 CLASS="ReturnType">
<A NAME="50593880_pgfId-19434"></A>[ann_type]</H6>
<H6 CLASS="CellFunctionBold">
<A NAME="50593880_pgfId-17294"></A>(aftagatype)</H6>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-17296"></A>ann_tag</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-17298"></A>uint16</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellParameter">
<A NAME="50593880_pgfId-17300"></A>integer</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="CellDescription">
<A NAME="50593880_pgfId-17302"></A>Annotation tag</P>
</TD>
</TR>
</TABLE>
</DIV>
<DIV>
<H6 CLASS="Example">
<A NAME="50593880_pgfId-44596"></A><DIV>
<IMG SRC="UG_html-62.gif" ALT="">
</DIV>
Obtaining Annotation Information</H6>
<P CLASS="Body">
<A NAME="50593880_pgfId-44598"></A>This example illustrates the use of <EM CLASS="FunctionName">
ANnumann/afnumann</EM>
 to obtain the number of annotations of an object, <EM CLASS="FunctionName">
ANannlist/afannlist</EM>
 to obtain the list of annotation identifiers, and <EM CLASS="FunctionName">
ANid2tagref/afidtagref</EM>
, <EM CLASS="FunctionName">
ANatype2tag/afatypetag</EM>
, and <EM CLASS="FunctionName">
ANtag2atype/aftagatype</EM>
 to perform some identifier conversions.</P>
<P CLASS="Body">
<A NAME="50593880_pgfId-44603"></A>In this example, the program locates the vgroup named &quot;AN Vgroup&quot; that was created in the file &quot;General_HDFobjects.hdf&quot; by Example 1. The program then gets the number of data descriptions that this vgroup has and the list of their identifiers.  If there are any identifers in the list, the program displays the corresponding reference numbers. Finally, the program makes two simple conversions, from an annotation type to a tag and from a tag to an annotation type, and displays the results.</P>
</DIV>
</DIV>
</DIV>
</DIV>
<DIV>
<H4 CLASS="Code-C-Title">
<A NAME="50593880_pgfId-24508"></A><DIV>
<IMG SRC="UG_html-65.gif" ALT="">
</DIV>
C:		</H4>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-24618"></A>#include &quot;hdf.h&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26036"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26037"></A>#define  FILE_NAME   &quot;General_HDFobjects.hdf&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26038"></A>#define  VG_NAME     &quot;AN Vgroup&quot;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26039"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26040"></A>main( )</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26041"></A>{</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26042"></A>   /************************* Variable declaration **************************/</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26043"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26044"></A>   intn   status_n;      /* returned status for functions returning an intn */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26045"></A>   int32  status_32,     /* returned status for functions returning an int32*/</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26046"></A>          file_id, an_id, ann_id, </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26047"></A>          n_annots,      /* number of annotations */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26048"></A>         *ann_list,      /* list of annotation identifiers */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26049"></A>          vgroup_ref,    /* reference number of the vgroup */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26050"></A>          index;         /* index of an annotation in the annotation list */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26051"></A>          ann_type annot_type = AN_DATA_DESC;   /* annotation to be obtained*/</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26052"></A>   uint16 ann_tag, ann_ref,              /* tag/ref number of an annotation */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26053"></A>          vgroup_tag = DFTAG_VG;         /* tag of the vgroup */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26054"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26055"></A>   /********************** End of variable declaration **********************/</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26056"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26057"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26058"></A>   * Create the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26059"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26060"></A>   file_id = Hopen (FILE_NAME, DFACC_READ, 0);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26061"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26062"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26063"></A>   * Initialize the V interface.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26064"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26065"></A>   status_n = Vstart (file_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26066"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26067"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26068"></A>   * Get the vgroup named VG_NAME.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26069"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26070"></A>   vgroup_ref = Vfind  (file_id, VG_NAME);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26071"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26072"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26073"></A>   * Initialize the AN interface and obtain an interface id.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26074"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26075"></A>   an_id = ANstart (file_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26076"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26077"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26078"></A>   * Get the number of object descriptions.  Note that, since ANnumann takes</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26079"></A>   * the tag and reference number as being of type unit16, vgroup_ref must be</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26080"></A>   * safely cast to uint16 by checking for FAIL value first.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26081"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26082"></A>   if (vgroup_ref != FAIL)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26083"></A>   {</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26084"></A>      n_annots = ANnumann (an_id, annot_type, vgroup_tag, (uint16)vgroup_ref);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26085"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26086"></A>      /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26087"></A>      * Allocate space to hold the annotation identifiers.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26088"></A>      */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26089"></A>      ann_list = malloc (n_annots * sizeof (int32));</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26090"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26091"></A>      /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26092"></A>      * Get the list of identifiers of the annotations attached to the </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26093"></A>      * vgroup and of type annot_type.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26094"></A>      */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26095"></A>      n_annots = ANannlist (an_id, annot_type, vgroup_tag, (uint16)vgroup_ref, </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26096"></A>                            ann_list);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26097"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26098"></A>      /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26099"></A>      * Get each annotation identifier from the list then display the </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26100"></A>      * tag/ref number pair of the corresponding annotation.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26101"></A>      */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26102"></A>      printf (&quot;List of annotations of type AN_DATA_DESC:\n&quot;);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26103"></A>      for (index = 0; index &lt; n_annots; index++)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26104"></A>      {</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26105"></A>        /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26106"></A>         * Get and display the ref number of the annotation from </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26107"></A>         * its identifier.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26108"></A>         */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26109"></A>         status_32 = ANid2tagref (ann_list[index], &amp;ann_tag, &amp;ann_ref);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26110"></A>         printf (&quot;Annotation index %d: tag = %s\nreference number= %d\n&quot;, </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26111"></A>           index, ann_tag == DFTAG_DIA ? &quot;DFTAG_DIA (data description)&quot;:</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26112"></A>           &quot;Incorrect&quot;, ann_ref);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26113"></A>      } /* for */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26114"></A>   } /* for */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26115"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26116"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26117"></A>   * Get and display an annotation type from an annotation tag.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26118"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26119"></A>   annot_type = ANtag2atype (DFTAG_FID);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26120"></A>   printf (&quot;\nAnnotation type of DFTAG_FID (file label) is %s\n&quot;, </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26121"></A>              annot_type == AN_FILE_LABEL ? &quot;AN_FILE_LABEL&quot;:&quot;Incorrect&quot;);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26122"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26123"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26124"></A>   * Get and display an annotation tag from an annotation type.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26125"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26126"></A>   ann_tag = ANatype2tag (AN_DATA_LABEL);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26127"></A>   printf (&quot;\nAnnotation tag of AN_DATA_LABEL is %s\n&quot;, </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26128"></A>              ann_tag == DFTAG_DIL ? &quot;DFTAG_DIL (data label)&quot;:&quot;Incorrect&quot;);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26129"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26130"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26131"></A>   * Terminate access to the AN interface and close the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26132"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26133"></A>   status_32 = ANend (an_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26134"></A>   status_n = Hclose (file_id);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26135"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26136"></A>   /*</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26137"></A>   * Free the space allocated for the annotation identifier list.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26138"></A>   */</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26139"></A>   free (ann_list);</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26140"></A>}</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-26141"></A>&nbsp;</P>
</DIV>
<DIV>
<H4 CLASS="Code-F-Title">
<A NAME="50593880_pgfId-46248"></A><DIV>
<IMG SRC="UG_html-65.gif" ALT="">
</DIV>
<A NAME="50593880_marker-45228"></A>FORTRAN:	</H4>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45148"></A>      program annotation_info</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45027"></A>      implicit none</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45028"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45029"></A>C     Parameter declaration</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45030"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45031"></A>      character*22 FILE_NAME</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45032"></A>      character*9  VG_NAME</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45033"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45034"></A>      parameter (FILE_NAME      = ’General_HDFobjects.hdf’,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45035"></A>     +           VG_NAME        = ’AN Vgroup’)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45036"></A>      integer    DFACC_READ</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45037"></A>      parameter (DFACC_READ = 1)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45038"></A>      integer AN_FILE_LABEL, AN_DATA_LABEL, AN_DATA_DESC</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45039"></A>      parameter (AN_FILE_LABEL = 2,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45040"></A>     +           AN_DATA_LABEL = 0,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45041"></A>     +           AN_DATA_DESC  = 1)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45042"></A>      integer DFTAG_DIA, DFTAG_FID, DFTAG_DIL</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45043"></A>      parameter (DFTAG_DIA = 105,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45044"></A>     +           DFTAG_FID = 100,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45045"></A>     +           DFTAG_DIL = 104)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45046"></A>      integer DFTAG_VG</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45047"></A>      parameter (DFTAG_VG = 1965)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45048"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45049"></A>C     Function declaration</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45050"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45051"></A>      integer hopen, hclose</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45052"></A>      integer afstart, afnumann, afannlist, afidtagref, aftagatype,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45053"></A>     +        afatypetag, afend</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45054"></A>      integer vfstart, vfind </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45055"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45056"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45057"></A>C**** Variable declaration *******************************************</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45058"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45059"></A>      integer status</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45060"></A>      integer file_id, an_id</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45061"></A>      integer n_annots, ann_index, annot_type, ann_tag, ann_ref</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45062"></A>      integer ann_list(10) </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45063"></A>      integer vgroup_tag, vgroup_ref</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45064"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45065"></A>C**** End of variable declaration ************************************</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45066"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45067"></A>      annot_type = AN_DATA_DESC</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45068"></A>      vgroup_tag = DFTAG_VG</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45069"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45070"></A>C     Open the HDF file for reading.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45071"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45072"></A>      file_id = hopen(FILE_NAME, DFACC_READ, 0)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45073"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45074"></A>C     Initialize the V interface.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45075"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45076"></A>      status = vfstart(file_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45077"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45078"></A>C     Get the group named VG_NAME.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45079"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45080"></A>      vgroup_ref = vfind(file_id, VG_NAME)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45081"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45082"></A>C     Initialize the AN interface.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45083"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45084"></A>      an_id = afstart(file_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45085"></A>&nbsp;</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45086"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45087"></A>C     Get the number of object descriptions. </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45088"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45089"></A>      if (vgroup_ref .eq. -1) goto 100 </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45090"></A>      n_annots = afnumann(an_id, annot_type, vgroup_tag, vgroup_ref)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45091"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45092"></A>C     Get the list of identifiers of the annotations attached to the</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45093"></A>C     vgroup and of type annot_type. Identifiers are read into ann_list</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45094"></A>C     buffer. One has to make sure that ann_list has the size big enough</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45095"></A>C     to hold the list of identifiers.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45096"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45097"></A>      n_annots = afannlist(an_id, annot_type, vgroup_tag, vgroup_ref,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45098"></A>     +                     ann_list)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45099"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45100"></A>C     Get each annotation identifier from the list then display the</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45101"></A>C     tag/ref number pair of the corresponding annotation.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45102"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45103"></A>      write(*,*) ’List of annotations of type AN_DATA_DESC’</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45104"></A>      do 10 ann_index = 0, n_annots - 1</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45105"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45106"></A>C     Get and display the ref number of the annotation from its</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45107"></A>C     identifier.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45108"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45109"></A>      status = afidtagref(ann_list(ann_index+1), ann_tag, ann_ref) </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45110"></A>      write(*,*) ’Annotation index: ’, ann_index</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45111"></A>      if (ann_tag .eq. DFTAG_DIA) then</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45112"></A>          write(*,*) ’tag = DFTAG_DIA (data description)’</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45113"></A>      else</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45114"></A>          write(*,*) ’ tag = Incorrect’</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45115"></A>      endif</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45116"></A>      write(*,*) ’reference number = ’, ann_ref</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45117"></A>10    continue</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45118"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45119"></A>C     Get and display an annotation type from an annotation tag.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45120"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45121"></A>      annot_type = aftagatype(DFTAG_FID)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45122"></A>      if (annot_type .eq. AN_FILE_LABEL) then</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45123"></A>         write(*,*) ’Annotation type of DFTAG_FID (file label) is ’,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45124"></A>     +               ’AN_FILE_LABEL ’</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45125"></A>      else</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45126"></A>         write(*,*) ’Annotation type of DFTAG_FID (file label) is ’,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45127"></A>     +               ’Incorrect’</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45128"></A>      endif   </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45129"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45130"></A>C     Get and display an annotation tag from an annotation type.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45131"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45132"></A>      ann_tag = afatypetag(AN_DATA_LABEL)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45133"></A>      if (ann_tag .eq. DFTAG_DIL ) then</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45134"></A>         write(*,*) ’Annotation tag of AN_DATA_LABEL is ’,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45135"></A>     +               ’DFTAG_DIL (data label)’</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45136"></A>      else</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45137"></A>         write(*,*) ’Annotation type of DFTAG_FID (file label) is ’,</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45138"></A>     +               ’Incorrect’</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45139"></A>      endif   </P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45140"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45141"></A>C     Terminate access to the AN interface and close the HDF file.</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45142"></A>C</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45143"></A>100   continue</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45144"></A>      status = afend(an_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45145"></A>      status = hclose(file_id)</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45146"></A>      end</P>
<P CLASS="ExampleCode">
<A NAME="50593880_pgfId-45147"></A>&nbsp;</P>
<P CLASS="Body">
<A NAME="50593881_pgfId-42573"></A>&nbsp;</P>
</DIV>
<HR><P><table id="Botofpage" border="0" width="850" cellspacing="0" cellpadding="0">      <tr>        <td align="left">        HDF 4.2.12 - June 2016<br/>        <a href="THG_Copyright.html">Copyright</a>        <td align="right">          <span style="font-size: 12px; font-weight: bold">            The HDF Group<br />          </span>          <span style="font-size: 12px">            <a href="http://www.hdfgroup.org">www.hdfgroup.org</a><br />            <img valign="bottom" border="0" src="images/help.jpg" height="12" alt="The HDF Group" valign="top" />          </span>        </td>      </tr>    </table></BODY>
</HTML>
